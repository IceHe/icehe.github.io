

<!DOCTYPE HTML>
<html lang="default">

<head>

<meta charset="UTF-8">

<title>Git Note | IceHe 何志远</title>

<meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">

<meta name="author" content="IceHe何志远"> 

<!-- Open Graph -->
<meta name="description" content="我的 Git 笔记，日常工作曾使用的指令组合。">
<meta property="og:type" content="article">
<meta property="og:title" content="Git Note">
<meta property="og:url" content="http://icehe.me/cmd/git_note/index.html">
<meta property="og:site_name" content="IceHe 何志远">
<meta property="og:description" content="我的 Git 笔记，日常工作曾使用的指令组合。">
<meta property="og:image" content="http://7vzp68.com1.z0.glb.clouddn.com/git%2Fgit_refname_relationship_00.jpg">
<meta property="og:image" content="http://7vzp68.com1.z0.glb.clouddn.com/git%2Fgit_file_status_00.jpg">
<meta property="og:image" content="http://7vzp68.com1.z0.glb.clouddn.com/git%2Fgit_objects_sample_00.jpg">
<meta property="og:image" content="http://7vzp68.com1.z0.glb.clouddn.com/git%2Fgit_merge_result_00.png">
<meta property="og:image" content="http://7vzp68.com1.z0.glb.clouddn.com/git%2Fgit_rebase_result_00.png">
<meta property="og:image" content="http://7vzp68.com1.z0.glb.clouddn.com/git%2Fgit_merge_after_rebase_00.png">
<meta property="og:updated_time" content="2016-06-03T16:00:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Git Note">
<meta name="twitter:description" content="我的 Git 笔记，日常工作曾使用的指令组合。">
<meta name="twitter:image" content="http://7vzp68.com1.z0.glb.clouddn.com/git%2Fgit_refname_relationship_00.jpg">

<!-- Google Web Master Tool - Meta Tag Verification -->
<meta name="google-site-verification" content="vTRLdAQD7TWpilyhBBr7fi2vnVujwgpT23Zox6OLrOI" />

<!-- Weibo Open Platform - Meta Tag Verification -->
<meta property="wb:webmaster" content="84efd5956048ab8f" />

<!-- RSS -->
<link rel="alternative" href="/atom.xml" title="IceHe 何志远" type="application/atom+xml">

<!-- Icons -->
<link rel="icon" href="http://7vzp68.com1.z0.glb.clouddn.com/common/favicon.ico">
<link rel="apple-touch-icon" href="http://7vzp68.com1.z0.glb.clouddn.com/common/jacman.jpg">
<link rel="apple-touch-icon-precomposed" href="http://7vzp68.com1.z0.glb.clouddn.com/common/jacman.jpg">

<!-- Font-awesome -->
<link href="//libs.cncdn.cn/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">

<!-- CSS -->
<link rel="stylesheet" href="/css/style.css">
<style type="text/css">
    .center { text-align: center; }
    .hidden { display: none; }
</style>

</head>

<body>

<header>

<div>
    
    <div id="imglogo">
        <a href="/">
            <!--<img src="/http://7vzp68.com1.z0.glb.clouddn.com/common/logo.png" alt="IceHe 何志远" title="IceHe 何志远"/> -->
            <img src="http://7vzp68.com1.z0.glb.clouddn.com/common/logo.png" alt="IceHe 何志远" title="IceHe 何志远"/>
        </a>
    </div>
    
    <div id="textlogo">
        <h1 class="site-name"><a href="/" title="IceHe 何志远">IceHe 何志远</a></h1>
        <h2 class="blog-motto">More is in vain when less will serve.</h2>
    </div>

    <div class="navbar">
        <a class="navbutton navmobile" href="#" title="Menu"></a>
    </div>

    <nav class="animated">
        <ul>
            <ul>
                
                <li><a href="/">Home 首页</a></li>
                
                <li><a href="/index">Index 总览</a></li>
                
                <li><a href="/bookmarks">Bookmarks</a></li>
                
                <li><a href="/about">Me 我</a></li>
                
                <li>
                
                    <form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
                        <label>Search</label>
                        <input type="search" id="search" autocomplete="on" name="q" maxlength="20" placeholder="Find" />
                    </form>
                
                </li>

            </ul>
        </ul>
    </nav>
</div>

</header>

<!-- Container Begin -->
<div id="container">
<div id="main" class="post" itemscope itemprop="blogPost">

<article itemprop="articleBody">

<header class="article-info clearfix">

    <h1 itemprop="name" class="article-title">
    
        <a href="/cmd/git_note/" title="Git Note" itemprop="url" class="article-url">Git Note</a>
    
    </h1>

    <p class="article-author hidden"> By
    
        <a href="/about" title="IceHe何志远" target="_blank" itemprop="author">IceHe何志远</a>
    
    </p>

    <p class="article-data">
    
        <span style="text-decoration: underline;">
            <time datetime="2016-06-03T16:00:00.000Z" itemprop="dateUpdated">
                2016-06-04
            </time>
        upd</span>
        &nbsp;|&nbsp;
    
        <time class="article-time" datetime="2016-02-14T16:00:00.000Z" itemprop="datePublished">
            2016-02-15
        </time>
        &nbsp;|&nbsp; <span class="article-pageview">?</span> views
    </p>

</header>

<div class="article-content">
    
    <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#References"><span class="toc-text">References</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Memo"><span class="toc-text">Memo</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Check-检查"><span class="toc-text">Check 检查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Index-索引"><span class="toc-text">Index 索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Back-反悔"><span class="toc-text">Back 反悔</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Branch-分支"><span class="toc-text">Branch 分支</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Config-配置"><span class="toc-text">Config 配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pull-amp-Push"><span class="toc-text">Pull & Push</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rebase-变基"><span class="toc-text">Rebase 变基</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Abbreviations"><span class="toc-text">Abbreviations</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Short-Docs"><span class="toc-text">Short Docs</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Setup-amp-Config"><span class="toc-text">Setup & Config</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Create-amp-Get-Proj"><span class="toc-text">Create & Get Proj</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Snapshot"><span class="toc-text">Snapshot</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Branch-amp-Merge"><span class="toc-text">Branch & Merge</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Share-amp-Update"><span class="toc-text">Share & Update</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Inspect-amp-Compare"><span class="toc-text">Inspect & Compare</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Patch"><span class="toc-text">Patch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Debug"><span class="toc-text">Debug</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Administration"><span class="toc-text">Administration</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Email"><span class="toc-text">Email</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#External-Systems"><span class="toc-text">External Systems</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Server-Admin"><span class="toc-text">Server Admin</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Plumbing-Cmds"><span class="toc-text">Plumbing Cmds</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gitignore"><span class="toc-text">.gitignore</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Concepts"><span class="toc-text">Concepts</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Commit-ID"><span class="toc-text">Commit ID</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Refname"><span class="toc-text">Refname</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Differ-and"><span class="toc-text">Differ ^ and ~</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#File-Statuses"><span class="toc-text">File Statuses</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Objects"><span class="toc-text">Objects</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cmd-Prompt"><span class="toc-text">Cmd Prompt</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reset-Mode"><span class="toc-text">Reset Mode</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#credential-helper"><span class="toc-text">credential.helper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rebase-Example"><span class="toc-text">Rebase Example</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hook"><span class="toc-text">Hook</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Zsh-Aliases"><span class="toc-text">Zsh Aliases</span></a></li></ol>
        
    </div>
    
    <ul>
<li>Omit the unusual commands at my work.</li>
</ul>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ul>
<li><a href="http://git-scm.com/" target="_blank" rel="external">Git SCM</a> —— Official Site</li>
<li><a href="http://git-scm.com/book/en/v2" target="_blank" rel="external">Git Book</a> - Official Guide 细致全面（<a href="http://git-scm.com/book/zh/v2" target="_blank" rel="external">简体中文版</a>）</li>
<li><a href="http://git-scm.com/docs" target="_blank" rel="external">Git Reference</a> - Official Docs</li>
<li><a href="http://backlogtool.com/git-guide/en/" target="_blank" rel="external">猴子都能懂的 Git 入门</a> - 深入浅出（<a href="http://backlogtool.com/git-guide/cn/" target="_blank" rel="external">中文版</a>）</li>
<li><a href="https://segmentfault.com/a/1190000004222489?utm_source=Weibo&amp;utm_medium=shareLink&amp;utm_campaign=socialShare" target="_blank" rel="external">闯过这 54 关，点亮你的 Git 技能树</a> - 实用主义。在具体的工作场景下学习如何使用</li>
<li><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="external">廖学峰的官方网站：Git 教程</a> - 快速上手</li>
<li><a href="https://github.com/doggy8088/Learn-Git-in-30-days/" target="_blank" rel="external">30 天精通 Git 版本控管</a> - 深入理解</li>
<li><a href="http://www.oschina.net/news/12542/git-and-svn" target="_blank" rel="external">GIT和SVN之间的五个基本区别</a> - <a href="http://boxysystems.com/index.php/5-fundamental-differences-between-git-svn/" target="_blank" rel="external">英文出处</a></li>
</ul>
<h1 id="Memo"><a href="#Memo" class="headerlink" title="Memo"></a>Memo</h1><p>笔者不时得用上但常忘记的指令。</p>
<p><em>PS: HEAD 代表的是最近的一次提交。</em></p>
<h2 id="Check-检查"><a href="#Check-检查" class="headerlink" title="Check 检查"></a>Check 检查</h2><ul>
<li><p>Commit 提交</p>
<p>  <code>git status -s</code> 查看仓库状态（以短格式）。<br>  <code>git reflog</code> 最近的 Git 操作历史。<br>  <code>git log --oneline</code> 查看提交日志（以短格式）。<br>  <code>git log -p -2</code> - <code>-p</code> 用来显示每次提交的内容差异；加上 <code>-2</code> 以便仅显示最近两次提交。<br><br></p>
<p>  <code>git diff</code> 查看 working tree 与 index file 的差别。<br>  <code>git diff --cached</code> 查看 index file 与 commit 的差别。<br>  <code>git diff HEAD</code> 查看 working tree 和 commit 的差别。<br><br></p>
</li>
<li><p>File 文件</p>
<p>  <code>git blame -C &lt;file_path&gt;</code> 查出错误代码的最后的编辑者。<br>  <code>git blame -L -C [开始行数],[结束行数] &lt;filename&gt;</code><br>  查看某文件每行代码的变更历史，包括 commit id，作者，时间，行号。</p>
<p>  加上 option <code>-C</code> Git 会分析正在标注的文件，并且尝试找出文件中从别的地方复制过来的代码片段的原始出处。<br>  Git 不会显式地记录文件的重命名，而会记录快照，然后在事后尝试计算出重命名的动作。<br>  这其中有一个很有意思的特性就是你可以让 Git 找出所有的代码移动。<br><br></p>
</li>
<li><p>Text 文本</p>
<p>  <code>git grep &quot;search_text&quot;</code> 在 Git 仓库中，查找代码片段。</p>
</li>
</ul>
<h2 id="Index-索引"><a href="#Index-索引" class="headerlink" title="Index 索引"></a>Index 索引</h2><p><code>git add &lt;file_path&gt;</code> 将需要提交的文件加入暂存区。</p>
<p><code>git rm --cached &lt;file_path&gt;</code> 删除文件在 Git 中的索引，但保留原件！<br><code>--staged</code> = <code>--cached</code></p>
<p><code>git commit -m &quot;commit_desc&quot;</code> 提交修改，并添加描述。<br><code>git commit -am &quot;commit_desc&quot;</code> 自动将被修改、删除的文件（不包括未加入索引的文件）加入暂存区，并提交。</p>
<h2 id="Back-反悔"><a href="#Back-反悔" class="headerlink" title="Back 反悔"></a>Back 反悔</h2><ul>
<li><p>File 文件</p>
<p>  <code>git checkout &lt;file_path&gt;</code> 将已被修改的文件恢复到上一次提交的状态。<br>  <code>git checkout &lt;commit_id&gt; &lt;file_path&gt;</code> 将已被修改的文件恢复到指定版本的状态。</p>
<p>  <code>git reset</code> 取消所有文件的暂存状态（staged，即等待被 commit 的状态）。<br>  <code>git reset HEAD &lt;file_path&gt;</code> 取消该文件的暂存状态。<br>  <code>git reset &lt;commit_id&gt; &lt;file_path&gt;</code> 取消该文件的暂存状态，将其 HEAD 指针移到指定 commit_id 的版本。<br><br></p>
</li>
<li><p>Commit 提交</p>
<p>  <code>git commit --amend</code> 上一次提交的内容有误，对其进行补充或更正。</p>
<p>  <code>git reset --hard ORIG_HEAD</code> 成功合并后反悔，回到合并前的状态。<br>  <code>git reset --soft HEAD^</code> 取消上一次提交，但保留提交后的修改。<br>  <code>git reset --hard HEAD^</code> 取消上一次提交，不保留提交后的修改。<br><br></p>
<p>  <code>git cherry-pick &lt;commit_id&gt;</code> 将另一分支的某一个 commit 的修改，应用到当前的分支来。<br>  当某个分支将要被删除，但其中某些 commit 的修改是有用的，于是将其单独取出来。<br>  <code>git cherry-pick &lt;commit_id&gt; -e</code> 提交前，需要重新编辑其提交说明。<br>  <code>git cherry-pick &lt;commit_id&gt; -n</code> 执行 cherry-pick 操作，只为套用该 commit 修改，但不会自动提交。以便在进行一些其它修改后，再一并提交。<br><br></p>
<p>  <code>git revert commit_id</code> 撤销某个 commit 的修改（以新建一个提交的方式）。一般在需要撤销的 commit 已经被 push 到远端服务器时，这么做。</p>
<p>  如果不慎 revert 了某次 commit 后，又反悔了，想恢复原来的状态，取消刚才的操作：</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog                  <span class="comment"># 查看 revert 操作的前的 commit 的 id</span></span><br><span class="line">$ git checkout &lt;commit_id&gt;   <span class="comment"># 恢复到 revert 前的 commit 的状态。</span></span><br></pre></td></tr></table></figure>
<h2 id="Branch-分支"><a href="#Branch-分支" class="headerlink" title="Branch 分支"></a>Branch 分支</h2><p><code>git branch</code> 查看分支。<br><code>git branch &lt;branch_name&gt;</code> 新建分支。</p>
<p><code>git checkout -b &lt;branch_name&gt;</code> 新建分支，并切换到该分支。<br><code>git checkout &lt;branch_name&gt;</code> 切换分支。</p>
<p><code>git merge &lt;branch_name&gt;</code> 将另一分支 <branch_name> 导入到当前分支。<br><code>git merge --squash &lt;branch_name&gt;</code> 把另一分支的所有提交合并成一个提交，并导入到当前分支。`</branch_name></p>
<h2 id="Config-配置"><a href="#Config-配置" class="headerlink" title="Config 配置"></a>Config 配置</h2><p><code>git config user.name &quot;icehe&quot;</code> 设置用户名。<br><code>git config user.email &quot;x@icehe.me&quot;</code> 设置邮箱。</p>
<p><code>git credential.helper osxkeychain</code> 长久储存密码，不用每次输入（OS X）。<br><code>git config credential.helper store</code> 长久储存密码，不用每次输入（非 OS X）。<br><code>git config --unset credential.helper</code> 密码更改后，重新设定。</p>
<h2 id="Pull-amp-Push"><a href="#Pull-amp-Push" class="headerlink" title="Pull &amp; Push"></a>Pull &amp; Push</h2><p><code>git pull faraway another:master</code> 将远端 faraway 仓库的 another 分支，拉到本地 master 分支。<br><code>git push faraway master:another</code> 从本地的 master 分支，推送到远端的 faraway 的仓库的 another 分支。</p>
<p><code>git config http.postBuffer 524288000</code> 当更新的内容较多时，Git 的缓存区可能不够用，可能导致 <code>git push</code> 失败，需用该指令增加缓存空间。</p>
<h2 id="Rebase-变基"><a href="#Rebase-变基" class="headerlink" title="Rebase 变基"></a>Rebase 变基</h2><p><code>git rebase &lt;branch_name&gt;</code> 变基的操作可能会发生 “冲突” 等意外状况。<br><code>git rebase --continue</code> 修复 “冲突” 等意外后，执行它以继续变基操作。<br><code>git rebase --abort</code> 假如情况弄得一团糟，需要中途中止变基操作时，运行该指令。</p>
<h2 id="Abbreviations"><a href="#Abbreviations" class="headerlink" title="Abbreviations"></a>Abbreviations</h2><p><code>abbr</code> abbreviation<br><code>addr</code> address<br><code>auto</code> automatically</p>
<p><code>cmd</code> command<br><code>config</code> configuration<br><code>cur</code> current</p>
<p><code>del</code> delete<br><code>desc</code> description<br><code>diff</code> difference<br><code>dir</code> directory<br><code>dirs</code> directories<br><code>docs</code> documentations</p>
<p><code>info</code> information<br><code>msg</code> message<br><code>mv</code> move<br><code>num</code> number</p>
<p><code>obj</code> object<br><code>opt</code> option<br><code>proj</code> project</p>
<p><code>repo</code> repository<br><code>rm</code> remove<br><code>var</code> variable</p>
<h1 id="Short-Docs"><a href="#Short-Docs" class="headerlink" title="Short Docs"></a>Short Docs</h1><h2 id="Setup-amp-Config"><a href="#Setup-amp-Config" class="headerlink" title="Setup &amp; Config"></a>Setup &amp; Config</h2><ul>
<li><p><a href="http://git-scm.com/docs/git-help" target="_blank" rel="external">help</a></p>
<p>  Display help info.</p>
<p>  <code>--all</code> | <code>-a</code> All available cmds.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-config" target="_blank" rel="external">config</a></p>
<p>  Get and set repo or global opts.</p>
<p>  <code>git config name [value]</code></p>
<p>  <code>--list</code> | <code>-l</code> List all config vars.<br>  <code>--edit</code> | <code>-e</code> Modify config file.<br>  <code>--unset</code> Rm matching key.</p>
<p>  <code>--local</code> Write opts to repo <code>.git/config</code> .<br>  <code>--global</code> … to global <code>~/.gitconfig</code><br>  <code>--system</code> … to system-wide <code>$(prefix)/etc/gitconfig</code></p>
</li>
</ul>
<h2 id="Create-amp-Get-Proj"><a href="#Create-amp-Get-Proj" class="headerlink" title="Create &amp; Get Proj"></a>Create &amp; Get Proj</h2><ul>
<li><p><a href="http://git-scm.com/docs/git-init" target="_blank" rel="external">init</a></p>
<p>  Create an empty Git repo or reinitialize an existing one.</p>
<p>  <code>--bare</code> 创建裸仓库。裸仓库在 Git 服务器上，纯粹为了共享使用，没有 working dir，其目录一般以 .git 结尾。 <br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-clone" target="_blank" rel="external">clone</a> <code>&lt;repo&gt; [&lt;dir&gt;]</code></p>
<p>  Clone a repo into a new dir.</p>
<p>  <code>--branch &lt;branch_name&gt;</code> | <code>-b &lt;branch_name&gt;</code></p>
</li>
</ul>
<h2 id="Snapshot"><a href="#Snapshot" class="headerlink" title="Snapshot"></a>Snapshot</h2><!--- `HEAD` The latest version of cur branch. (Need improving)-->
<ul>
<li><p><a href="http://git-scm.com/docs/git-add" target="_blank" rel="external">add</a> <code>&lt;pathspec&gt;</code></p>
<p>  Add file contents to the index.</p>
<p>  <code>--all</code> | <code>-A</code> <br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-status" target="_blank" rel="external">status</a></p>
<p>  Show the working tree status.</p>
<p>  <code>--short</code> | <code>-s</code> Show in short-format.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-diff" target="_blank" rel="external">diff</a> <code>[options] [&lt;commit&gt;] [--] [&lt;path&gt;…]</code></p>
<p>  Show changes between commits, commit and working tree, etc.</p>
<p>  <code>--minimal</code> Spend extra time to make sure the smallest possible diff is produced.<br>  <code>--patience</code> Generate a diff using the “patience diff” algorithm.<br>  <code>--histogram</code> Generate a diff using the “histogram diff” algorithm.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-commit" target="_blank" rel="external">commit</a></p>
<p>  Record changes to the repo.</p>
<p>  <code>--all</code> | <code>-a</code> Auto stage files that have been modified and deleted, but not untracked ones.<br>  <code>--message=&lt;msg&gt;</code> | <code>-m &lt;msg&gt;</code> Use given <msg> as the commit msg.<br>  <code>--amend</code> Replace tip of cur branch by creating a new commit.<br><br></msg></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-reset" target="_blank" rel="external">reset</a> <code>[&lt;mode&gt;] [&lt;commit&gt;]</code></p>
<p>  Reset cur HEAD to the specified state.</p>
<p>  Modes:</p>
<p>  <code>--soft</code> Does not touch the index file or the working tree at all (but resets the head to &lt;commit&gt;).<br>  <code>--mixed</code> Resets the index but not the working tree.<br>  <code>--hard</code> Resets the index and working tree.<br>  <code>--merge</code>, <code>--keep</code> …<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-rm" target="_blank" rel="external">rm</a> <code>&lt;file&gt; …</code></p>
<p>  Remove files from the working tree and from the index.</p>
<p>  <code>-r</code> Allow recursive removal.<br>  <code>--cached</code> Remove paths only from the index.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-mv" target="_blank" rel="external">mv</a> <code>&lt;source&gt; &lt;destination&gt;</code></p>
<p>  Move or rename a file, dir or a symlink.</p>
</li>
</ul>
<h2 id="Branch-amp-Merge"><a href="#Branch-amp-Merge" class="headerlink" title="Branch &amp; Merge"></a>Branch &amp; Merge</h2><ul>
<li><p><a href="http://git-scm.com/docs/git-branch" target="_blank" rel="external">branch</a> <code>[&lt;option&gt;] &lt;branch_name&gt;</code></p>
<p>  List, create, or del branches.</p>
<p>  <code>--delete</code> | <code>-d</code><br>  <code>--force</code> | <code>-f</code><br>  <code>-D</code> Shortcut for <code>--delete --force</code></p>
<p>  <code>--move</code> | <code>-m</code> Move / Rename.<br>  <code>-M</code> Shortcut for <code>--move --force</code></p>
<p>  <code>--all</code> | <code>-a</code><br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-checkout" target="_blank" rel="external">checkout</a> <code>&lt;commit&gt;</code></p>
<p>  Switch branches or restore working tree files.</p>
<p>  <code>&lt;commit&gt;</code> can be a branch, a commit(id), a tag or a file path.</p>
<p>  <code>[-b|-B] &lt;new_branch&gt; [&lt;start_point&gt;]</code> Create a new branch.<br>  <code>-B</code> … , if the branch already exists, reset it to <code>&lt;start_point&gt;</code><br>  <code>&lt;start_point&gt;</code> The name of a commit at which to start the new branch. Defaults to HEAD.<br><br></p>
<p>  <code>git checkout [--] &lt;file_path&gt;</code> Dangerous! 撤销对工作区修改；这个命令是以最新的存储时间节点（add和commit）为参照，拷贝原来版本的文件覆盖工作区对应文件。除非确实不要那个文件中的修改了，否则不要使用这个命令！<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-merge" target="_blank" rel="external">merge</a> <code>&lt;commit&gt;</code></p>
<p>  Join two or more development histories together.</p>
<p>  <code>&lt;commit&gt;</code> can be a branch name, a commit id or a tag id.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-log" target="_blank" rel="external">log</a> <code>[&lt;options&gt;] [&lt;revision range&gt;] [[--] &lt;path&gt;…]</code></p>
<p>  Show Commit logs.</p>
<p>  <code>-L &lt;start&gt;,&lt;end&gt;:&lt;file&gt;</code><br>  <code>&lt;start&gt;</code> &amp; <code>&lt;end&gt;</code> can be line num, <code>/regex/</code> or <code>+offset | -offset</code> (line num) .<br>  <code>-L :&lt;funcname&gt;:&lt;file&gt;</code><br>  <code>[--] &lt;path&gt;…</code> Show commits related to specified paths in brief.<br><br></p>
<p>  <code>-p</code> Show diff between each commits.<br>  <code>--stat</code> Generate a diffstat.<br>  <code>--name-status</code> Show only names and status of changed files.<br>  <code>--abbrev-commit</code> show only a partial prefix of the full 40-byte hexadecimal object name.<br>  <code>--graph</code> Draw a text-based graphical representation of the commit history on the left hand side of the output.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-stash" target="_blank" rel="external">stash</a></p>
<p>  Stash the changes in a dirty working dir away.</p>
<p>  <code>git stash</code> = <code>git stash save</code></p>
<p>  <code>list</code> List stashes you have.<br>  <code>show [&lt;stash&gt;]</code> Show the changes recorded in specific stash.<br>  <code>pop [&lt;stash&gt;]</code> Rm a single stashed state from the stash list and apply it on top of the cur working tree state.</p>
<p>  <code>&lt;stash&gt;</code> e.g. <code>stash@{&lt;revision&gt;}ster +10 ~0 -0 !</code><br>  在这段提示的地方，你可以看到几个东西：<br>  master 代表目前工作目录是 master 分支，也是 Git 的预设分支名称。<br>  “红色”的数字都代表 Untracked (未追踪)`<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-tag" target="_blank" rel="external">tag</a> <code>[-f] [-m &lt;msg&gt;] &lt;tag_name&gt; [&lt;commit&gt; | &lt;object&gt;]</code></p>
<p>  Create, list, del or verify a tag obj signed with GPG</p>
<p>  <code>--force</code> | <code>-f</code> Replace an existing tag with the given name (instead of failing).<br>  <code>--message=&lt;msg&gt;</code> | <code>-m &lt;msg&gt;</code> Use the given tag msg (instead of prompting).</p>
<p>  Add a tag reference in refs/tags/, unless <code>-d</code> and <code>-l</code> (to del or list tags).<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-mergetool" target="_blank" rel="external">mergetool</a> …</p>
</li>
</ul>
<h2 id="Share-amp-Update"><a href="#Share-amp-Update" class="headerlink" title="Share &amp; Update"></a>Share &amp; Update</h2><ul>
<li><p><a href="http://git-scm.com/docs/git-fetch" target="_blank" rel="external">fetch</a> <code>[&lt;options&gt;] [&lt;repo&gt;]</code></p>
<p>  Download objs and refs from another repo.</p>
<p>  <code>--all</code> Fetch all remotes.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-pull" target="_blank" rel="external">pull</a> <code>[&lt;options&gt;] [&lt;repo&gt;]</code></p>
<p>  Fetch from and integrate with another repo or a local branch.</p>
<p>  In its default mode, <code>git pull</code> is shorthand for <code>git fetch</code> followed by <code>git merge FETCH_HEAD</code>.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-push" target="_blank" rel="external">push</a> <code>[&lt;repo&gt;]</code></p>
<p>  Update remote refs along with associated objs.</p>
<p>  <code>--all</code> Push all branches.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-remote" target="_blank" rel="external">remote</a></p>
<p>  Manage set of tracked repos.</p>
<p>  <code>add [-t &lt;branch&gt;] &lt;name&gt; &lt;url&gt;</code><br>  <code>rename &lt;old&gt; &lt;new&gt;</code><br>  <code>remove &lt;name&gt;</code> | <code>rm &lt;name&gt;</code><br>  <code>show</code>, <code>set-url</code> …<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-submodule" target="_blank" rel="external">submodule</a></p>
<p>  Initialize, update or inspect submodules.</p>
</li>
</ul>
<h2 id="Inspect-amp-Compare"><a href="#Inspect-amp-Compare" class="headerlink" title="Inspect &amp; Compare"></a>Inspect &amp; Compare</h2><ul>
<li><p><a href="http://git-scm.com/docs/git-show" target="_blank" rel="external">show</a></p>
<p>  Show various types of objs.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-shortlog" target="_blank" rel="external">shortlog</a> <code>[&lt;options&gt;] [&lt;revision range&gt;] [[\--] &lt;path&gt;…]</code></p>
<p>  Summarize git log output.</p>
<p>  <code>--summary</code> | <code>-s</code> Suppress commit desc and provide a commit count summary only.</p>
<p>  <code>--email</code> | <code>-e</code> Show the email addr of each author.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-log" target="_blank" rel="external">log</a>, <a href="http://git-scm.com/docs/git-diff" target="_blank" rel="external">diff</a> &nbsp; <em>See above.</em></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-describe" target="_blank" rel="external">describe</a> …</p>
</li>
</ul>
<h2 id="Patch"><a href="#Patch" class="headerlink" title="Patch"></a>Patch</h2><ul>
<li><p><a href="http://git-scm.com/docs/git-revert" target="_blank" rel="external">revert</a> <code>&lt;commit&gt;…</code></p>
<p>  Revert some existing commits.</p>
<p>  <code>git revert --continue</code> Continue the operation in progress using the info <code>.git/sequencer</code>. Can be used to continue after resolving conflicts in a failed cherry-pick or revert.<br>  <code>git revert --quit</code> Clear the sequencer state after a failed cherry-pick or revert.<br>  <code>git revert --abort</code> Cancel the operation and return to the pre-sequence state.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-rebase" target="_blank" rel="external">rebase</a> <code>[&lt;upstream&gt; [&lt;branch&gt;]]</code></p>
<p>  Forward-port local commits to the updated upstream head.</p>
<p>  <code>&lt;upstream&gt;</code> Upstream branch to compare against. May be any valid commit, not just an existing branch name. Defaults to the configured upstream for the cur<br>  <code>&lt;branch&gt;</code> Working branch; defaults to HEAD.</p>
<p>  <code>--interactive</code> | <code>-i</code> Make a list of the commits which are about to be rebased. Let the user edit that list before rebasing.<br><br></p>
<p>  <code>git rebase --continue</code> Restart the rebasing process after having resolved a merge conflict.<br>  <code>git rebase --abort</code> Abort the rebase operation and reset HEAD to the original branch.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-cherry-pick" target="_blank" rel="external">cherry-pick</a> <code>&lt;commit&gt;…</code></p>
<p>  Apply the changes introduced by some existing commits.</p>
<p>  <code>-edit</code> | <code>-e</code> Edit the commit msg prior to committing.<br>  <code>--no-commit</code> | <code>-n</code> Apply the changes without making any commit.<br><br></p>
<p>  <code>git cherry-pick --continue</code> Continue the operation in progress using the info in <code>.git/sequencer</code>. Can be used to continue after resolving conflicts in a failed cherry-pick or revert.<br>  <code>git cherry-pick --quit</code> Forget about the cur operation in progress. Can be used to clear the sequencer state after a failed cherry-pick or revert.<br>  <code>git cherry-pick --abort</code> Cancel the operation and return to the pre-sequence state.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-diff" target="_blank" rel="external">diff</a> &nbsp; <em>See above.</em></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-apply" target="_blank" rel="external">apply</a> …</p>
</li>
</ul>
<h2 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h2><ul>
<li><p><a href="http://git-scm.com/docs/git-bisect" target="_blank" rel="external">bisect</a> <code>&lt;subcommand&gt; &lt;options&gt;</code></p>
<p>  Use binary search to find the commit that introduced a bug.</p>
<p>  Subcommands: <code>start</code>, <code>good</code>, <code>bad</code>, <code>reset</code> …<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-blame" target="_blank" rel="external">blame</a> <code>&lt;file&gt;</code></p>
<p>  Show what revision and author last modified each line of a file.</p>
<p>  <code>-b</code> Show blank SHA-1 for boundary commits. This can also be controlled via the <code>blame.blankboundary</code> config opt.<br>  <code>-l</code> Show long rev (Default: off).<br>  <code>-t</code> Show raw timestamp (Default: off).<br><br></p>
<p>  <code>-L &lt;start&gt;,&lt;end&gt;</code> <code>-L :&lt;funcname&gt;</code> Annotate only the given line range. May be specified multiple times. Overlapping ranges are allowed.<br>  <code>&lt;start&gt;</code> and <code>&lt;end&gt;</code> are optional. <code>-L &lt;start&gt;</code> or <code>-L &lt;start&gt;,</code> spans from <code>&lt;start&gt;</code> to end of file. <code>-L ,&lt;end&gt;</code> spans from start of file to <code>&lt;end&gt;</code>.<br><br></p>
<p>  <code>-M</code> Detect moved or copied lines within a file.<br>  <code>-C</code> In addition to -M, detect lines moved or copied from other files that were modified in the same commit.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-grep" target="_blank" rel="external">grep</a> <code>&lt;pattern&gt;</code></p>
<p>  Print lines matching a pattern.</p>
<p>  <code>--cached</code> Instead of searching tracked files in the working tree, search blobs registered in the index file.<br>  <code>--no-index</code> Search files in the current directory that is not managed by Git.<br>  <code>--untracked</code> In addition to searching in the tracked files in the working tree, search also in untracked files.</p>
<p>  <code>--fixed-strings</code> | <code>-F</code> Use fixed strings for patterns (don’t interpret pattern as a regex).<br>  <code>--ignore-case</code> | <code>-i</code> Ignore case diff between the patterns and the files.<br>  <code>--line-number</code> | <code>-n</code> Prefix the line num to matching lines.</p>
</li>
</ul>
<h2 id="Administration"><a href="#Administration" class="headerlink" title="Administration"></a>Administration</h2><ul>
<li><p><a href="http://git-scm.com/docs/git-reflog" target="_blank" rel="external">reflog</a></p>
<p>  Manage reflog info.</p>
<p>  <code>--all</code> Process the reflogs of all references.<br><br></p>
</li>
<li><p><a href="http://git-scm.com/docs/git-clean" target="_blank" rel="external">clean</a>, <a href="http://git-scm.com/docs/git-gc" target="_blank" rel="external">gc</a>, <a href="http://git-scm.com/docs/git-fsck" target="_blank" rel="external">fsck</a>, <a href="http://git-scm.com/docs/git-filter-branch" target="_blank" rel="external">filter-branch</a>, <a href="http://git-scm.com/docs/git-instaweb" target="_blank" rel="external">instaweb</a>, <a href="http://git-scm.com/docs/git-archive" target="_blank" rel="external">archive</a>, <a href="http://git-scm.com/docs/git-bundle" target="_blank" rel="external">bundle</a> …</p>
</li>
</ul>
<h2 id="Email"><a href="#Email" class="headerlink" title="Email"></a>Email</h2><ul>
<li><a href="http://git-scm.com/docs/git-am" target="_blank" rel="external">am</a>, <a href="http://git-scm.com/docs/git-apply" target="_blank" rel="external">apply</a>, <a href="http://git-scm.com/docs/git-format-patch" target="_blank" rel="external">format-patch</a>, <a href="http://git-scm.com/docs/git-send-email" target="_blank" rel="external">send-email</a>, <a href="http://git-scm.com/docs/git-request-pull" target="_blank" rel="external">request-pull</a> …</li>
</ul>
<h2 id="External-Systems"><a href="#External-Systems" class="headerlink" title="External Systems"></a>External Systems</h2><ul>
<li><a href="http://git-scm.com/docs/git-svn" target="_blank" rel="external">svn</a>, <a href="http://git-scm.com/docs/git-fast-import" target="_blank" rel="external">fast-import</a> …</li>
</ul>
<h2 id="Server-Admin"><a href="#Server-Admin" class="headerlink" title="Server Admin"></a>Server Admin</h2><ul>
<li><a href="http://git-scm.com/docs/git-daemon" target="_blank" rel="external">daemon</a>, <a href="http://git-scm.com/docs/git-update-server-info" target="_blank" rel="external">update-server-info</a> …</li>
</ul>
<h2 id="Plumbing-Cmds"><a href="#Plumbing-Cmds" class="headerlink" title="Plumbing Cmds"></a>Plumbing Cmds</h2><ul>
<li><p><a href="http://git-scm.com/docs/git-ls-files" target="_blank" rel="external">ls-files</a></p>
<p>  Show info about files in the index and the working tree.</p>
<p>  <code>--cached</code> | <code>-c</code> Show cached files in the output (default).<br>  <code>--delete</code> | <code>-d</code> … deleted …<br>  <code>--modified</code> | <code>-m</code> … modified …<br>  <code>--others</code> | <code>-o</code> … others …<br>  <code>--ignored</code> | <code>-i</code> … ignored …<br>  <code>--stage</code> | <code>-i</code> … stage …<br>  <code>--unmerged</code> | <code>-u</code> … unmerged …</p>
</li>
<li><p><a href="http://git-scm.com/docs/git-cat-file" target="_blank" rel="external">cat-file</a>, <a href="http://git-scm.com/docs/git-commit-tree" target="_blank" rel="external">commit-tree</a>, <a href="http://git-scm.com/docs/git-count-objects" target="_blank" rel="external">count-objects</a>, <a href="http://git-scm.com/docs/git-diff-index" target="_blank" rel="external">diff-index</a>, <a href="http://git-scm.com/docs/git-for-each-ref" target="_blank" rel="external">for-each-ref</a>, <a href="http://git-scm.com/docs/git-hash-object" target="_blank" rel="external">hash-object</a>, <a href="http://git-scm.com/docs/git-merge-base" target="_blank" rel="external">merge-base</a>, <a href="http://git-scm.com/docs/git-read-tree" target="_blank" rel="external">read-tree</a>, <a href="http://git-scm.com/docs/git-rev-list" target="_blank" rel="external">rev-list</a>, <a href="http://git-scm.com/docs/git-rev-parse" target="_blank" rel="external">rev-parse</a>, <a href="http://git-scm.com/docs/git-show-ref" target="_blank" rel="external">show-ref</a>, <a href="http://git-scm.com/docs/git-symbolic-ref" target="_blank" rel="external">symbolic-ref</a>, <a href="http://git-scm.com/docs/git-update-index" target="_blank" rel="external">update-index</a>, <a href="http://git-scm.com/docs/git-update-ref" target="_blank" rel="external">update-ref</a>, <a href="http://git-scm.com/docs/git-verify-pack" target="_blank" rel="external">verify-pack</a>, <a href="http://git-scm.com/docs/git-write-tree" target="_blank" rel="external">write-tree</a> …</p>
</li>
</ul>
<h2 id="gitignore"><a href="#gitignore" class="headerlink" title=".gitignore"></a><a href="https://git-scm.com/docs/gitignore" target="_blank" rel="external">.gitignore</a></h2><ul>
<li>A file specifies intentionally untracked files that Git should ignore. Files already tracked are not affected.</li>
<li><p>Gitignore <strong>patterns</strong> from multiple <strong>sources</strong>, with the following order of precedence, from highest to lowest:</p>
<ul>
<li>From cmd line.</li>
<li>File <code>.gitignore</code> specifies files all developers will want to ignore</li>
<li>File <code>$GIT_DIR/info/exclude</code> specifies files that are just useful to a particular repo<br>e.g., auxiliary files are specific to one user’s workflow.</li>
<li>The file specified by config var <code>core.excludesFile</code> in the user’s file <code>~/.gitconfig</code>.<br>For ignoring some files in all situations. e.g., backup or temporary files generated by editors.<br><br></li>
</ul>
</li>
<li><p><strong>Pattern Format</strong></p>
<ul>
<li>A line starting with <code>#</code> serves as a <strong>comment</strong>.</li>
<li>An optional prefix <code>!</code> which <strong>negates</strong> the pattern.</li>
<li>A pattern which ends with a slash <code>/</code> will only find a match with a dir e.g. <code>foo/</code> will match a dir foo and paths underneath it.</li>
<li>A leading slash <code>/</code> matches the beginning of the pathname. For example, <code>/*.c</code> matches “cat-file.c” but not “mozilla-sha1/sha1.c”.</li>
<li><code>*</code> asterisk wildcard (通配符).</li>
<li>…</li>
</ul>
</li>
</ul>
<h1 id="Concepts"><a href="#Concepts" class="headerlink" title="Concepts"></a>Concepts</h1><p>Git 中的部分概念、指令的简要笔记。</p>
<h2 id="Commit-ID"><a href="#Commit-ID" class="headerlink" title="Commit ID"></a><strong>Commit ID</strong></h2><p>Git 对象 id 是透过内容进行 SHA1 哈希后的结果，所以很长。<br>在 Git 标示 “绝对名称” 时，可以用前面几个字符代替，最少不可低于 4 个字符。<br>也就是说 4 ~ 40 个字符长度的 “绝对名称” 都是可以用的。</p>
<h2 id="Refname"><a href="#Refname" class="headerlink" title="Refname"></a><strong>Refname</strong></h2><p>“参照名称” 简单来说就是 Git 对象的一个 “指针”，用来指向特定 Git 对象，所以可以把 “参照名称” 想像成 Git 对象绝对名称的别名 （Alias），用来帮助记忆。<br><br></p>
<p><code>HEAD</code> 代表最新版本，tag 标签名称，这些都是 “参照名称”，总之就是为了让你好记而已。<br>不过当你输入参照名称的 “简称” 时，预设 Git 会依照以下顺序搜寻适当的参照名称，<br>只要找到对应的文件，就会立刻回传该文件内容的“对象绝对名称”：</p>
<p><code>.git/&lt;参照简称&gt;</code><br><code>.git/refs/&lt;参照简称&gt;</code><br><code>.git/refs/tags/&lt;参照简称;标签名称&gt;</code><br><code>.git/refs/heads/&lt;参照简称;本地分支名称&gt;</code><br><code>.git/refs/remotes/&lt;参照简称&gt;</code><br><code>.git/refs/remotes/&lt;参照简称;远端分支名称&gt;/HEAD</code><br><br></p>
<p>Git 参照名称又有区分“一般参照”与“符号参照”，两者的用途一模一样，只在于内容不太一样。<br>“符号参照” 会指向另一个 “一般参照”，而 “一般参照” 则是指向一个 Git 物件的 “绝对名称”。</p>
<h3 id="Differ-and"><a href="#Differ-and" class="headerlink" title="Differ ^ and ~"></a>Differ ^ and ~</h3><p><strong>相对名称表示法 ^ 与 ~ 的差异</strong></p>
<p>关于 ~ 的意义，代表“第一个上层 commit 对象”的意思。<br>关于 ^ 代表的意思则是“拥有多个上层 commit 对象时，要代表第几个第一代的上层对象”。</p>
<p>如果有一个“参照名称”为 C，若要找到它的第一个上层 commit 对象，可以有以下表达方式：</p>
<p><code>C^</code> , <code>C^1</code> , <code>C~</code> , <code>C~1</code></p>
<p>如果要找到它的第二个上层 commit 对象（在没有合并的状况下），有以下表达方式：</p>
<p><code>C^^</code> , <code>C^1^1</code> , <code>C~2</code> , <code>C~~</code> , <code>C~1~1</code></p>
<p>但不能用 C^2 来表达“第二个上层 commit 物件”！<br>原因是在没有合并的情况下，这个 C 只有一个上层对象而已，只能用 C^2 代表 “上一层对象的第二个上层对象”。<br><br></p>
<p><img src="http://7vzp68.com1.z0.glb.clouddn.com/git%2Fgit_refname_relationship_00.jpg" alt="Git Refname with ~ and ^"></p>
<p>上述概念比较抽象，透过图解更清晰易懂。<br>如上图所示，想找到 C 这个 commit 对象的相对路径下的其它 commit 对象（上层对象），<br>由于 C 这个 commit 对象有三个上层对象，这代表这个 commit 对象是透过合并而被建立的，<br>那么要透过“相对名称”找到每一个路径，就必须搭配组合 ^ 与 ~ 的使用技巧，才能定位到每个想开启的版本。</p>
<h2 id="File-Statuses"><a href="#File-Statuses" class="headerlink" title="File Statuses"></a><strong>File Statuses</strong></h2><p>“索引” 的目的主要用来纪录 “有哪些文件即将要被提交到下一个 commit 版本中”。<br>换句话说，如果你想要提交一个版本到 Git c昂哭，那么你一定要先更新索引状态，变更才会被提交出去。</p>
<p><code>Index</code> 索引<br><code>Cache</code> 缓存<br><code>Directory cache</code> 目录缓存<br><code>Current directory cache</code> 当前目录缓存<br><code>Staging area</code> 等待被 commit 的地方<br><code>Staged files</code> 等待被 commit 的文件<br><br></p>
<p><img src="http://7vzp68.com1.z0.glb.clouddn.com/git%2Fgit_file_status_00.jpg" alt="Git File Statuses"></p>
<p><code>untracked</code> 未追踪的，代表尚未被加入 Git 仓库的文件状态<br><code>unmodified</code> 未修改的，代表文件第一次被加入，或是文件内容与 HEAD 内容一致的状态<br><code>modified</code> 已修改的，代表文件已经被修改过，或是文件内容与 HEAD 内容不一致的状态<br><code>staged</code> 等待被 commit 的，代表下次执行 git commit 会将这些文件全部送入仓库</p>
<h2 id="Objects"><a href="#Objects" class="headerlink" title="Objects"></a><strong>Objects</strong></h2><p><img src="http://7vzp68.com1.z0.glb.clouddn.com/git%2Fgit_objects_sample_00.jpg" alt="Git Objects Relationship"></p>
<ul>
<li><p><strong>blob 对象</strong></p>
<p>  就是工作目录中某个文件的 “内容”，且只有内容而已，当你执行 git add 指令的同时，这些新增文件的内容就会立刻被写入成为 blob 对象，文件名则是对象内容的哈希运算结果，没有任何其它信息，像是文件时间、原本的文件名或文件的其它信息，都会储存在其它类型的对象里（也就是 tree 文件）。</p>
</li>
<li><p><strong>tree 对象</strong></p>
<p>  这类文件会储存特定目录下的所有信息，包含该目录下的文件名、对应的 blob 对象名称、文件连结（symbolic link）或其他 tree 对象等等。由于 tree 对象可以包含其它 tree 物件，所以浏览 tree 对象的方式其实就跟文件系统中的“文件夹”没两样。简单来说，tree 对象这就是在特定版本下某个文件夹的快照（Snapshot）。</p>
</li>
<li><p><strong>commit 对象</strong></p>
<p>  用来记录有那些 tree 对象包含在版本中，一个 commit 对象代表着 Git 的一次提交，记录着特定提交版本有哪些 tree 对象、以及版本提交的时间、纪录信息等等，通常还会记录上一层的 commit 对象名称只有第一次 commit 的版本没有上层 commit 对象名称。</p>
</li>
<li><p><strong>tag 对象</strong></p>
<p>  是一个容器，通常用来关联特定一个 commit 对象（也可以关联到特定 blob、tree 对象），并额外储存一些额外的参考信息（metadata），例如: tag 名称。使用 tag 对象最常见的情况是替特定一个版本的 commit 对象标示一个易懂的名称，可能是代表某个特定发行的版本，或是拥有某个特殊意义的版本。）</p>
</li>
</ul>
<h2 id="Cmd-Prompt"><a href="#Cmd-Prompt" class="headerlink" title="Cmd Prompt"></a><strong>Cmd Prompt</strong></h2><p>命令行提示符中，位于路径后面的 Git 相关提示：<code>[master +10 ~0 -0 !]</code><br><em>PS:  具体显示效果根据命令行配置而不同。</em><br><br></p>
<p>在这段提示的地方，可以看到几个东西：</p>
<ul>
<li><code>master</code> 代表目前工作目录是 master 分支，也是 Git 的预设分支名称。</li>
<li>“红色” 的数字都代表 Untracked（未追踪）的文件，也就是这些修改都不会进入版本库。</li>
<li><code>+10</code> 代表有 10 个 “新增” 的文件。</li>
<li><code>~0</code> 代表有 0 个 “修改” 的文件。</li>
<li><code>-0</code> 代表有 0 个 “删除” 的文件。</li>
</ul>
<h2 id="Reset-Mode"><a href="#Reset-Mode" class="headerlink" title="Reset Mode"></a><strong>Reset Mode</strong></h2><p>除了默认的 mixed 模式，还有 soft 和 hard 模式。欲了解受各模式影响的部分，请参照下面的表格。</p>
<table>
<thead>
<tr>
<th>模式名称</th>
<th>HEAD的位置</th>
<th>索引</th>
<th>工作树</th>
</tr>
</thead>
<tbody>
<tr>
<td>soft</td>
<td>修改</td>
<td>不修改</td>
<td>不修改</td>
</tr>
<tr>
<td>mixed</td>
<td>修改</td>
<td>修改</td>
<td>不修改</td>
</tr>
<tr>
<td>hard</td>
<td>修改</td>
<td>修改</td>
<td>修改</td>
</tr>
</tbody>
</table>
<ul>
<li>只取消提交（soft）。</li>
<li>复原修改过的索引的状态（mixed）。</li>
<li>彻底取消最近的提交（hard）。</li>
</ul>
<h2 id="credential-helper"><a href="#credential-helper" class="headerlink" title="credential.helper"></a><strong>credential.helper</strong></h2><p>Git 拥有一个凭证系统来处理密码储存的事，避免用户总是需要重复输入密码。</p>
<p><code>git config credential.helper &lt;options&gt;</code><br><br></p>
<p>Options as follow:</p>
<ul>
<li>默认所有都不缓存。 每一次连接都会询问你的用户名和密码。</li>
<li><code>cache</code> 模式会将凭证存放在内存中一段时间。密码永远不会被存储在磁盘中，会在15分钟后从内存中清除。</li>
<li><code>store</code> 模式会将凭证用明文的形式存放在磁盘中，并且永不过期。这意味着除非你修改了你在 Git 服务器上的密码，否则你永远不需要再次输入你的凭证信息。这种方式的缺点是你的密码是用明文的方式存放在你的 home 目录下。</li>
<li><code>osxkeychain</code> 模式，需要你使用的是 Mac。它会将凭证缓存到你系统用户的钥匙串中。它将凭证存放在磁盘中，且永不过期，但会被加密，其加密方式与存放 HTTPS 凭证以及 Safari 的自动填写的方式是相同的。</li>
<li>如果使用的是 Windows，可以安装一个叫做 “winstore” 的辅助工具。这和上面说的 “osxkeychain” 十分类似，但是是使用 Windows Credential Store 来控制敏感信息。可以在 <a href="https://gitcredentialstore.codeplex.com" target="_blank" rel="external">https://gitcredentialstore.codeplex.com</a> 下载。</li>
</ul>
<h2 id="Rebase-Example"><a href="#Rebase-Example" class="headerlink" title="Rebase Example"></a><strong>Rebase Example</strong></h2><p><img src="http://7vzp68.com1.z0.glb.clouddn.com/git%2Fgit_merge_result_00.png" alt="Git Merge Result"></p>
<p>整合分支最容易的方法是 merge 命令。它会把两个分支的最新快照（C3 和 C4）以及二者最近的共同祖先（C2）进行三方合并，合并的结果是生成一个新的快照（并提交）。<br><br></p>
<p><img src="http://7vzp68.com1.z0.glb.clouddn.com/git%2Fgit_rebase_result_00.png" alt="Git Rebase Result"></p>
<p>“变基”（rebase）的方法：可以提取在 C4 中引入的补丁和修改，然后在 C3 的基础上再应用一次。<br>使用 rebase 命令将提交到某一分支上的所有修改都移至另一分支上，就好像“重新播放”一样。</p>
<p>上图的操作指令是:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout experiment</span><br><span class="line">$ git rebase master</span><br></pre></td></tr></table></figure></p>
<p>原理是首先找到这两个分支（即当前分支 experiment、变基操作的目标基底分支 master）的最近共同祖先 C2，<br>然后对比当前分支相对于该祖先的历次提交，提取相应的修改并存为临时文件，<br>然后将当前分支指向目标基底 C3, 最后以此将之前另存为临时文件的修改依序应用。<br><br></p>
<p>现在回到 master 分支，进行一次快进合并，结果如下图。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge experiment</span><br></pre></td></tr></table></figure>
<p><img src="http://7vzp68.com1.z0.glb.clouddn.com/git%2Fgit_merge_after_rebase_00.png" alt="Git Merge After Rebasing"></p>
<p>此时，C4’ 指向的快照就和上面使用 merge 命令的例子中 C5 指向的快照一模一样了。<br>两种整合方法的最终结果没有任何区别，但是变基使得提交历史更加整洁。<br>在查看一个经过变基的分支的历史记录时会发现，尽管实际的开发工作是并行的，<br>但它们看上去就像是先后串行的一样，提交历史是一条直线没有分叉。</p>
<p>一般这样做是为了确保在向远程分支推送时能保持提交历史的整洁，如向某个别人维护的项目贡献代码时。<br>在这种情况下，首先在自己的分支里进行开发，当开发完成时你需要先将你的代码变基到 origin/master 上，然后再向主项目提交修改。这样的话，该项目的维护者就不再需要进行整合工作，只需要快进合并便可。</p>
<p>请注意，无论是通过变基，还是通过三方合并，整合的最终结果所指向的快照始终是一样的，只不过提交历史不同罢了。<br><br></p>
<p>变基是将一系列提交按照原有次序依次应用到另一分支上，而合并是把最终结果合在一起。</p>
<p>总的原则是，只对尚未推送或分享给别人的本地修改执行变基操作清理历史，从不对已推送至别处的提交执行变基操作，这样，你才能享受到两种方式（变基VS合并）带来的便利。</p>
<p>更多的变基例子参考 <a href="http://git-scm.com/book/en/v2/Git-Branching-Rebasing" target="_blank" rel="external">Git 分支 - 变基</a>。</p>
<h2 id="Hook"><a href="#Hook" class="headerlink" title="Hook"></a><a href="http://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90" target="_blank" rel="external"><strong>Hook</strong></a></h2><p>钩子，暂略。</p>
<h1 id="Zsh-Aliases"><a href="#Zsh-Aliases" class="headerlink" title="Zsh Aliases"></a><a href="https://github.com/IceHe/oh-my-zsh/blob/master/plugins/git/git.plugin.zsh" target="_blank" rel="external"><strong>Zsh Aliases</strong></a></h1><ul>
<li>All details : <a href="https://github.com/IceHe/oh-my-zsh/blob/master/plugins/git/git.plugin.zsh" target="_blank" rel="external">https://github.com/IceHe/oh-my-zsh/blob/master/plugins/git/git.plugin.zsh</a></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> g=<span class="string">'git'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> ga=<span class="string">'git add'</span></span><br><span class="line"><span class="built_in">alias</span> gaa=<span class="string">'git add --all'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gb=<span class="string">'git branch'</span></span><br><span class="line"><span class="built_in">alias</span> gba=<span class="string">'git branch -a'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gbl=<span class="string">'git blame -b -w'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gc=<span class="string">'git commit -v'</span></span><br><span class="line"><span class="built_in">alias</span> gc!=<span class="string">'git commit -v --amend'</span></span><br><span class="line"><span class="built_in">alias</span> gca!=<span class="string">'git commit -v -a --amend'</span></span><br><span class="line"><span class="built_in">alias</span> gcm=<span class="string">'git commit -m'</span></span><br><span class="line"><span class="built_in">alias</span> gcam=<span class="string">'git commit -a -m'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gcf=<span class="string">'git config'</span></span><br><span class="line"><span class="built_in">alias</span> gcfl=<span class="string">'git config -l'</span></span><br><span class="line"><span class="built_in">alias</span> gce=<span class="string">'git config -e'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gcl=<span class="string">'git clone --recursive'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gco=<span class="string">'git checkout'</span></span><br><span class="line"><span class="built_in">alias</span> gcom<span class="string">'git checkout master'</span></span><br><span class="line"><span class="built_in">alias</span> gcb=<span class="string">'git checkout -b'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gcp=<span class="string">'git cherry-pick'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gd=<span class="string">'git diff'</span></span><br><span class="line"><span class="built_in">alias</span> gdc=<span class="string">'git diff --cached'</span></span><br><span class="line"><span class="built_in">alias</span> gdw=<span class="string">'git diff --word-diff'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gg=<span class="string">'git gui citool'</span></span><br><span class="line"><span class="built_in">alias</span> gga=<span class="string">'git gui citool --amend'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> ggr=<span class="string">'git grep'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gk=<span class="string">'\gitk --all --branches'</span></span><br><span class="line"><span class="built_in">alias</span> gke=<span class="string">'\gitk --all $(git log -g --pretty=format:%h)'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gl=<span class="string">'git pull'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> glog=<span class="string">'git log --oneline --decorate --graph'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gp=<span class="string">'git push'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> grm=<span class="string">'git remote'</span></span><br><span class="line"><span class="built_in">alias</span> grma=<span class="string">'git remote add'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gr=<span class="string">'git reset HEAD'</span></span><br><span class="line"><span class="built_in">alias</span> grh=<span class="string">'git reset HEAD --hard'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> grb=<span class="string">'git rebase'</span></span><br><span class="line"><span class="built_in">alias</span> grba=<span class="string">'git rebase --abort'</span></span><br><span class="line"><span class="built_in">alias</span> grbc=<span class="string">'git rebase --continue'</span></span><br><span class="line"><span class="built_in">alias</span> grbi=<span class="string">'git rebase -i'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gs=<span class="string">'git status -sb'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gst=<span class="string">'git stash'</span></span><br><span class="line"><span class="built_in">alias</span> gsd=<span class="string">'git stash drop'</span></span><br><span class="line"><span class="built_in">alias</span> gsl=<span class="string">'git stash list'</span></span><br><span class="line"><span class="built_in">alias</span> gsp=<span class="string">'git stash pop'</span></span><br></pre></td></tr></table></figure>

</div>

<footer class="article-footer clearfix">

<div class="article-catetags">
    
    <div class="article-categories">
        <span></span>
        <a class="article-category-link" href="/categories/Command/">Command</a>
    </div>
    
    
    <div class="article-tags hidden">
        
        <span></span> <a href="/tags/Command/">Command</a>
    </div>
    
</div>


<div class="article-share" id="share">
    <div data-url="http://icehe.me/cmd/git_note/" data-title="Git Note | IceHe 何志远" data-tsina="undefined" class="share clearfix">
    </div>
</div>


</footer>

</article>

<nav class="article-nav clearfix">
    
    <div class="prev" >
        <br/>
        <a href="/index/" title="Blog Index 目录">
            <strong>Prev</strong><br/>
            <span>
                Blog Index 目录
            </span>
        </a>
    </div>
    
    
    <div class="next">
        <br/>
        <a href="/search/"  title="Google CSE 站内搜索">
            <strong>Next</strong><br/>
            <span>
                Google CSE 站内搜索
            </span>
        </a>
    </div>
    
</nav>



<!-- Comments Begin -->
<section id="comments" class="comment">
    <div class="ds-thread"
         data-thread-key="cmd/git_note/"
         data-title="Git Note"
         data-url="http://icehe.me/cmd/git_note/">
    </div>
</section>

<script type="text/javascript">
var duoshuoQuery = {short_name:"icehe"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
    || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
<!-- Comments End -->


</div>  

<!-- Sidebar Begin -->

<div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>


<script type="text/javascript">
    function switch_widget_hidden(widget_a_elem){
        widget_class = widget_a_elem.parentElement.parentElement.className;
        var is_hidden = (document.querySelector('.' + widget_class + ' ul').className == 'hidden');
        document.querySelector('.' + widget_class + ' ul').className = (is_hidden ? 'clearfix' : 'hidden');
        document.querySelector('.' + widget_class + ' p i').className = (is_hidden ? 'fa fa-caret-up' : 'fa fa-caret-down');
    }
</script>

<div id="asidepart">

<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>

<aside class="clearfix">


<div class="categorieslist">
    <p class="asidetitle">
        <!--<a href="javascript:;" onclick="switch_widget_hidden(this);">-->
        Categ 分类 &nbsp;
        <!--<i class="fa fa-caret-up"></i>-->
        <!--</a>-->
    </p>
    <ul class="clearfix">
        
        <li><a href="/categories/ASM/" title="ASM">ASM<sup>17</sup></a></li>
        
        <li><a href="/categories/AppleScript/" title="AppleScript">AppleScript<sup>2</sup></a></li>
        
        <li><a href="/categories/Batch/" title="Batch">Batch<sup>4</sup></a></li>
        
        <li><a href="/categories/C/" title="C++">C++<sup>7</sup></a></li>
        
        <li><a href="/categories/CentOS/" title="CentOS">CentOS<sup>6</sup></a></li>
        
        <li><a href="/categories/Command/" title="Command">Command<sup>1</sup></a></li>
        
        <li><a href="/categories/JavaScript/" title="JavaScript">JavaScript<sup>1</sup></a></li>
        
        <li><a href="/categories/Mac/" title="Mac">Mac<sup>2</sup></a></li>
        
        <li><a href="/categories/Shadowsocks/" title="Shadowsocks">Shadowsocks<sup>1</sup></a></li>
        
        <li><a href="/categories/Web/" title="Web">Web<sup>4</sup></a></li>
        
        <li><a href="/categories/read/" title="read">read<sup>4</sup></a></li>
        
        <li><a href="/categories/think/" title="think">think<sup>1</sup></a></li>
        
        <li><a href="/categories/time-mgt/" title="time mgt">time mgt<sup>2</sup></a></li>
        
        <li><a href="/categories/whoami/" title="whoami">whoami<sup>3</sup></a></li>
        
    </ul>
</div>


<div class="recommendlist">
    <p class="asidetitle">
        Recommend 推荐
    </p>

    <ul id="recommend_ul" class="clearfix"></ul>
</div>

<div class="popularlist">
    <p class="asidetitle">
        <!--<a href="javascript:;" onclick="switch_widget_hidden(this);">-->
            Top15 热榜 &nbsp;
            <!--<i class="fa fa-caret-up"></i>-->
        <!--</a>-->
    </p>
    <ul id="popularlist_ul" class="clearfix">
        
            <li><a href="javascript:;">1 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">2 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">3 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">4 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">5 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">6 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">7 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">8 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">9 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">10 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">11 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">12 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">13 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">14 &nbsp;loading ...</a></li>
        
            <li><a href="javascript:;">15 &nbsp;loading ...</a></li>
        
    </ul>
</div>

<div class="rsspart">
    <a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

<!-- Donate Module Begin -->

<p class="asidetitle" style="display: none;">Donate 打赏</p>

<!-- Donate CSS Begin -->
<style type="text/css">
    .donate_bar a.btn_donate{
        margin-top: 0.8em;
        display: inline-block;
        width: 82px;
        height: 82px;
        background: url("http://img.t.sinajs.cn/t5/style/images/apps_PRF/e_media/btn_reward.gif") no-repeat;
        _background: url("http://img.t.sinajs.cn/t5/style/images/apps_PRF/e_media/btn_reward.gif") no-repeat;

        -webkit-transition: background 0s;
        -moz-transition: background 0s;
        -o-transition: background 0s;
        -ms-transition: background 0s;
        transition: background 0s;
    }
    .donate_bar a.btn_donate:hover{ background-position: 0px -82px; }
    .donate_bar .donate_txt {
        display: block;
        color: #9d9d9d;
        font: 14px/2 "Microsoft Yahei";
    }
    .bold { font-weight: bold; }
</style>
<!-- Donate CSS End -->

<!-- Donate Begin -->
<div id="donate_board_wdg" class="donate_bar center">
    <a id="btn_donate_wdg" class="btn_donate" href="/reward" title="Reward 打赏" target="_top"></a>
    <span class="donate_txt copyright" style="font-size: 78%; font-weight: bold;">
        &copy; 2016 Ice He All Rights Reserved.
    </span>
</div>
<!-- Donate End -->

<!-- Donate Module End -->

</aside>

</div>

<!-- Sidebar End -->

</div>
<!-- Container End -->





<!-- JavaScript Resource Begin -->
<script id="jQueryLink" src="//libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
<script type="text/javascript">
    window.jQuery || document.write('<script src="/js/jquery-2.0.3.min.js"><\/script>');
</script>
<script src="http://7vzp67.com1.z0.glb.clouddn.com/js/gallery.js"></script>
<script src="http://7vzp67.com1.z0.glb.clouddn.com/js/jquery.imagesloaded.min.js"></script>
<script src="http://7vzp67.com1.z0.glb.clouddn.com/js/jquery.qrcode-0.12.0.min.js"></script>
<!--<script src="/js/jquery-2.0.3.min.js"></script>-->
<!--<script src="/js/jquery.imagesloaded.min.js"></script>-->
<!--<script src="/js/gallery.js"></script>-->
<!--<script src="/js/jquery.qrcode-0.12.0.min.js"></script>-->
<!-- JavaScript Resource End -->


<!-- For Post Begin -->
<script type="text/javascript">
    $(document).ready(function(){
        var ai = $('.article-content>iframe'),
                ae = $('.article-content>embed'),
                t  = $('#toc'),
                ta = $('#toc.toc-aside'),
                o  = $('.openaside'),
                c  = $('.closeaside');
        if(ai.length>0){
            ai.wrap('<div class="video-container" />');
        };
        if(ae.length>0){
            ae.wrap('<div class="video-container" />');
        };
        c.click(function(){
            ta.css('display', 'block').addClass('fadeIn');
        });
        o.click(function(){
            ta.css('display', 'none');
        });
        $(window).scroll(function(){
            ta.css("top",Math.max(140, 320 - $(this).scrollTop()));
        });
    });
</script>
<!-- For Post End -->


<!-- For Like Button Begin -->
<script type="text/javascript">
    /* Click Duoshuo 'Like' button automatically */
    $(window).load(function() {
        var ds_like_button = document.getElementsByClassName('ds-like-thread-button');
        if (1 == ds_like_button.length
                && "none" != document.getElementsByClassName('ds-meta')[0].style.display
                && -1 == document.getElementsByClassName('ds-thread-like-text')[0].innerHTML.indexOf('已喜欢')
        ) {
            ds_like_button[0].click();
            document.getElementsByClassName('ds-like-tooltip-close')[0].click();
            window.location.href = '#';
        }
    });
</script>
<!-- For Like Button End -->

<!-- For Responsive Design Begin -->
<script type="text/javascript">
    $(document).ready(function(){
        $('.navbar').click(function(){
            $('header nav').toggleClass('shownav');
        });

        var myWidth = 0;
        function getSize(){
            if( typeof( window.innerWidth ) == 'number' ) {
                myWidth = window.innerWidth;
            } else if( document.documentElement && document.documentElement.clientWidth) {
                myWidth = document.documentElement.clientWidth;
            };
        };

        var m = $('#main'),
                a = $('#asidepart'),
                c = $('.closeaside'),
                o = $('.openaside');
        c.click(function(){
            a.addClass('fadeOut').css('display', 'none');
            o.css('display', 'block').addClass('fadeIn');
            m.addClass('moveMain');
        });
        o.click(function(){
            o.css('display', 'none').removeClass('beforeFadeIn');
            a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');
            m.removeClass('moveMain');
        });

        $(window).scroll(function(){
            o.css("top", Math.max(80,260-$(this).scrollTop()));
        });

        

        $(window).resize(function(){
            getSize();
            if (myWidth >= 1024) {
                $('header nav').removeClass('shownav');
            } else {
                m.removeClass('moveMain');
                a.css('display', 'block').removeClass('fadeOut');
                o.css('display', 'none');
                
            }
        });
    });
</script>
<!-- For Responsive Design End -->




<!-- Share Begin -->
<script type="text/javascript">
    $(document).ready(function(){
        var $this = $('.share'),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                //title = $this.attr('data-title'),
                tsina = $this.attr('data-tsina'),
                description = $this.attr('description');

        var title = '《 ' + $('.article-url').attr('title') + ' 》@IceHe何志远 的技术博客『 '
                + document.getElementsByName('description')[0].content + '』';

        var weibo_share_url = 'http://service.weibo.com/share/share.php?type=button&searchPic=true&style=full&title=' + title + '&url=' + encodedUrl + '&pic=http%3A%2F%2F7vzp68.com1.z0.glb.clouddn.com%2Fabout%2Favatar_03a.jpg&appkey=' + tsina;

        var html = [
            '<div class="hoverqrcode clearfix"></div>',
            '<a class="overlay" id="qrcode"></a>',
            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
            '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
            '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
            '<a href="javascript:;" class="article-share-weibo" title="微博" onclick="window.open(\'' + weibo_share_url + '\', \'_blank\', \'width=615,height=505\')"></a>',
            '<span title="Share to"></span>'
        ].join('');

        $this.append(html);

        $('.hoverqrcode').hide();

        var myWidth = 0;
        function updatehoverqrcode(){
            if( typeof( window.innerWidth ) == 'number' ) {
                myWidth = window.innerWidth;
            } else if( document.documentElement && document.documentElement.clientWidth) {
                myWidth = document.documentElement.clientWidth;
            };
            var qrsize = myWidth > 1024 ? 200:100;
            var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
            var p = $('.article-share-qrcode').position();
            $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                    .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                    .qrcode(options);
        };

        $(window).resize(function(){
            $('.hoverqrcode').hide();
        });

        $('.article-share-qrcode').click(function(){
            updatehoverqrcode();
            $('.hoverqrcode').toggle();
        });

        $('.article-share-qrcode').hover(function(){}, function(){
            $('.hoverqrcode').hide();
        });
    });
</script>
<!-- Share End -->



<!-- Totop Begin -->
<div id="totop">
    <a title="Back to Top">
        <img src="//7vzp68.com1.z0.glb.clouddn.com/common/scrollup.png"/>
    </a>
</div>
<script src="/js/totop.js"></script>
<!-- Totop End -->



<!-- Fancybox Begin -->
<link rel="stylesheet" href="http://7vzp67.com1.z0.glb.clouddn.com/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="http://7vzp67.com1.z0.glb.clouddn.com/fancybox/jquery.fancybox.pack.js"></script>
<!--<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">-->
<!--<script src="/fancybox/jquery.fancybox.pack.js"></script>-->
<script type="text/javascript">
    $(document).ready(function(){
        $('.article-content').each(function(i){
            $(this).find('img').each(function(){
                if ($(this).parent().hasClass('fancybox')) return;
                var alt = this.alt;
                if (alt) $(this).after('<span class="caption">' + alt + '</span>');
                $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
            });

            $(this).find('.fancybox').each(function(){
                $(this).attr('rel', 'article' + i);
            });
        });

        if($.fancybox){
            $('.fancybox').fancybox();
        }
    });
</script>
<!-- Fancybox End -->


<!-- Analytics Begin -->
<div style="display: none;">
    <script type="text/javascript">
    
        /* Google Analytics */

        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-60837823-1', 'auto');
        ga('send', 'pageview');
        
        
        /* Baidu Statistics */

        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?ba81ef13fc65c4dcf8cf8586d25818a4";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    
    </script>
</div>
<!-- Analytics End -->

<!-- Lean Cloud Begin -->
<script src="https://leancloud.cn/scripts/lib/av-0.5.0.min.js"></script>
<script type="text/javascript">

    /* For the statistics of page views */

    AV.initialize(
        "u1mg4ase5iwhhnyqlavbmd5lkbj7mb5oy4linckob65z1axp", // 应用 id
        "fe7peybzqmpgludkwu43fk15s655i8neejt3pkoezlqtbeu5" // 应用 key
    );

    function addCount(Counter) {
        if (1 == $('.article-title').length
                && (-1 != location.href.indexOf("icehe.me"))
                && (-1 == location.href.indexOf("icehe.me/notes/"))
        ) {
            url = $('.article-url').attr('href').trim();
            title = $('.article-title').text().trim();
            var query = new AV.Query(Counter);

            query.equalTo("url", url); // use url as unique idnetfication
            query.find({
                success: function(results) {
                    if (results.length>0) {
                        var counter = results[0];
                        counter.fetchWhenSave(true); //get recent result
                        counter.increment("time");
                        counter.save();
                    } else {
                        var newcounter = new Counter();
                        newcounter.set("title", title);
                        newcounter.set("url", url);
                        newcounter.set("time", 1);
                        newcounter.save(null, {
                            success: function(newcounter) {
                                //alert('New object created');
                            },
                            error: function(newcounter,error) {
                                //alert('Failed to create');
                            }
                        });
                    }
                },
                error: function(error) { // find null is not a error
                    // alert('Error:' + error.code + " " + error.message);
                }
            });
        }
    }

    $(function() {
        var Counter = AV.Object.extend("Counter");
        // Only increse visit counting when it's a post
        // and it's not the local site.
        addCount(Counter);

        // if popularlist widget exists, add item to it.
        var popular_list = $('.popularlist');
        if (1 == popular_list.length) {
            var query = new AV.Query(Counter);
            query.descending("time");
            query.limit(15);
            query.find({
                success: function(results) {
                    for(var i = 0; i < results.length; ++i) {
                        var counter = results[i];
                        title = counter.get("title");

                        $('#popularlist_ul li:eq(' + i + ')').html('<a href="'
                                + counter.get("url") + '" name="'
                                + title + '">'
                                + '<sup>'
                                + counter.get("time") + ' </sup> &nbsp;'
                                + title
                                + '</a>'
                        );
                    }
                },
                error: function(error) {
                    //alert("Error:" + error.code + " " + error.message);
                }
            });
        }

        // if recommendlist widget exists, add item to it.
        var recommend_list = $('.recommendlist');
        if (1 == recommend_list.length) {
            var recommend_urls = [
                '/c++/C++ Interview Book/',
                '/think/time_mgt/',
                '/think/bye2015/',
                '/cmd/git_note/',
                '/tools/',
//                '/bookmarks/',
            ];
            for (var i = 0; i < recommend_urls.length; ++i) {
                query.equalTo("url", recommend_urls[i]); // use url as unique idnetfication
                query.find({
                    success: function(results) {
                        if (results.length > 0) {
                            var counter = results[0];
                            var title = counter.get("title");

                            $('#recommend_ul').append('<li><a href="'
                                    + counter.get("url") + '" name="'
                                    + title + '">'
                                    + '<sup>'
                                    + counter.get("time") + ' </sup> &nbsp;'
                                    + title + '</a></li>'
                            );
                        }
                    },
                });
            }
        }

        // if cur page is a post, set the post pageview.
        var article_info = $(".article-info");
        if (1 == article_info.length) {
            var query = new AV.Query(Counter);
            query.equalTo("url", article_info.find(".article-title a").attr("href"));
            query.limit(1);
            query.find({
                success: function(results) {
                    if (1 == results.length) {
                        var counter = results[0];
                        var title = counter.get("title");
                        var url = counter.get("url");
                        var time = counter.get("time");

                        article_info.find(".article-pageview").text(time);
                    }
                },
                error: function(error) {
                    article_info.find(".article-pageview").text("?");
                    //alert("Error:" + error.code + " " + error.message);
                }
            });
        }

        // if cur page is Home, set the post_list's pageviews.
        var post_list = $("#main[class!=post]");
        if (0 != post_list.length) {
            var post_items = post_list.find(".post a");
            for (var i = 0; i < post_items.length; ++i) {
                var url = post_items.eq(i).attr("href");
                query.equalTo("url", url);
                query.limit(1);
                query.find({
                    success: function(results) {
                        if (1 == results.length) {
                            var counter = results[0];
                            var url = counter.get("url");
                            var time = counter.get("time");

                            $(".post a[href='" + url + "']").find('.readtimes').text(time);
                        }
                    },
                    error: function(error) {
                        //alert("Error:" + error.code + " " + error.message);
                    }
                });
            }
        }
    });
</script>
<!-- Lean Cloud End -->



<!-- 不蒜子 -->
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


</body>

</html>



