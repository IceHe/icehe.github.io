<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="google34949e442e488102" />







  <meta name="baidu-site-verification" content="04tLeUMqMf" />







  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="IceHe" />





  <link rel="alternate" href="/atom.xml" title="Ice He" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="http://7vzp68.com1.z0.glb.clouddn.com/common/favicon_h.ico?v=5.1.0" />






<meta name="description" content="Regular Expression 正则表达式自《百度百科 正则表达式》：http://baike.baidu.com/view/94238.htm
元字符描述
\将下一个字符标记为一个特殊字符、或一个原义字符、或一个向后引用、或一个八进制转义符。例如，“\n”匹配\n。“\n”匹配换行符。序列“\”匹配“\”而“(”则匹配“(”。
^匹配输入字符串的开始位置。如果设置了RegExp对象的Mul">
<meta property="og:type" content="website">
<meta property="og:title" content="正则表达式 - Note">
<meta property="og:url" content="http://icehe.me/notes/regular_expression.html">
<meta property="og:site_name" content="Ice He">
<meta property="og:description" content="Regular Expression 正则表达式自《百度百科 正则表达式》：http://baike.baidu.com/view/94238.htm
元字符描述
\将下一个字符标记为一个特殊字符、或一个原义字符、或一个向后引用、或一个八进制转义符。例如，“\n”匹配\n。“\n”匹配换行符。序列“\”匹配“\”而“(”则匹配“(”。
^匹配输入字符串的开始位置。如果设置了RegExp对象的Mul">
<meta property="og:updated_time" content="2016-10-30T06:54:43.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="正则表达式 - Note">
<meta name="twitter:description" content="Regular Expression 正则表达式自《百度百科 正则表达式》：http://baike.baidu.com/view/94238.htm
元字符描述
\将下一个字符标记为一个特殊字符、或一个原义字符、或一个向后引用、或一个八进制转义符。例如，“\n”匹配\n。“\n”匹配换行符。序列“\”匹配“\”而“(”则匹配“(”。
^匹配输入字符串的开始位置。如果设置了RegExp对象的Mul">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"display":"always","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://icehe.me/notes/regular_expression.html"/>





  <title>
  

  
    正则表达式 - Note | Ice He
  
</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-60837823-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ba81ef13fc65c4dcf8cf8586d25818a4";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  

  <div class="container   ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Ice He</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">More is in vain when less will serve.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-quote-left"></i> <br />
            
            文章
          </a>
        </li>
      
        
        <li class="menu-item menu-item-nav">
          <a href="/bookmarks" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-bookmark"></i> <br />
            
            导航
          </a>
        </li>
      
        
        <li class="menu-item menu-item-cv">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-star"></i> <br />
            
            简历
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>

<style type="text/css">
    .bold   { font-weight: bold; }
    .center { text-align: center; }
    .hidden { display: none; }
    .no_underline { border-bottom: 0; }
    .white { color: white; }
</style>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
  <header class="post-header">

	<h1 class="post-title" itemprop="name headline">正则表达式 - Note</h1>



</header>

    
    
      <h1 id="Regular-Expression-正则表达式"><a href="#Regular-Expression-正则表达式" class="headerlink" title="Regular Expression 正则表达式"></a>Regular Expression 正则表达式</h1><p>自《百度百科 正则表达式》：<br><a href="http://baike.baidu.com/view/94238.htm" target="_blank" rel="external">http://baike.baidu.com/view/94238.htm</a></p>
<p>元字符<br>描述</p>
<p>\<br>将下一个字符标记为一个特殊字符、或一个原义字符、或一个向后引用、或一个八进制转义符。例如，“\n”匹配\n。“\n”匹配换行符。序列“\”匹配“\”而“(”则匹配“(”。</p>
<p>^<br>匹配输入字符串的开始位置。如果设置了RegExp对象的Multiline属性，^也匹配“\n”或“\r”之后的位置。</p>
<p>$<br>匹配输入字符串的结束位置。如果设置了RegExp对象的Multiline属性，$也匹配“\n”或“\r”之前的位置。</p>
<p><em><br>匹配前面的子表达式零次或多次(大于等于0次)。例如，zo</em>能匹配“z”，“zo”以及“zoo”。*等价于{0,}。</p>
<p>+<br>匹配前面的子表达式一次ß或多次(大于等于1次）。例如，“zo+”能匹配“zo”以及“zoo”，但不能匹配“z”。+等价于{1,}。</p>
<p>?<br>匹配前面的子表达式零次或一次。例如，“do(es)?”可以匹配“do”或“does”中的“do”。?等价于{0,1}。</p>
<p>{n}<br>n是一个非负整数。匹配确定的n次。例如，“o{2}”不能匹配“Bob”中的“o”，但是能匹配“food”中的两个o。</p>
<p>{n,}<br>n是一个非负整数。至少匹配n次。例如，“o{2,}”不能匹配“Bob”中的“o”，但能匹配“foooood”中的所有o。“o{1,}”等价于“o+”。“o{0,}”则等价于“o*”。</p>
<p>{n,m}<br>m和n均为非负整数，其中n&lt;=m。最少匹配n次且最多匹配m次。例如，“o{1,3}”将匹配“fooooood”中的前三个o。“o{0,1}”等价于“o?”。请注意在逗号和两个数之间不能有空格。</p>
<p>?<br>当该字符紧跟在任何一个其他限制符（*,+,?，{n}，{n,}，{n,m}）后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串“oooo”，“o+?”将匹配单个“o”，而“o+”将匹配所有“o”。</p>
<p>.点<br>匹配除“\r\n”之外的任何单个字符。要匹配包括“\r\n”在内的任何字符，请使用像“[\s\S]”的模式。</p>
<p>(pattern)<br>匹配pattern并获取这一匹配。所获取的匹配可以从产生的Matches集合得到，在VBScript中使用SubMatches集合，在JScript中则使用$0…$9属性。要匹配圆括号字符，请使用“(”或“)”。</p>
<p>(?:pattern)<br>匹配pattern但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用或字符“(|)”来组合一个模式的各个部分是很有用。例如“industr(?:y|ies)”就是一个比“industry|industries”更简略的表达式。</p>
<p>(?=pattern)<br>正向肯定预查，在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如，“Windows(?=95|98|NT|2000)”能匹配“Windows2000”中的“Windows”，但不能匹配“Windows3.1”中的“Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。</p>
<p>(?!pattern)<br>正向否定预查，在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如“Windows(?!95|98|NT|2000)”能匹配“Windows3.1”中的“Windows”，但不能匹配“Windows2000”中的“Windows”。</p>
<p>(?&lt;=pattern)<br>反向肯定预查，与正向肯定预查类似，只是方向相反。例如，“(?&lt;=95|98|NT|2000)Windows”能匹配“2000Windows”中的“Windows”，但不能匹配“3.1Windows”中的“Windows”。</p>
<p>(?&lt;!pattern)<br>反向否定预查，与正向否定预查类似，只是方向相反。例如“(?&lt;!95|98|NT|2000)Windows”能匹配“3.1Windows”中的“Windows”，但不能匹配“2000Windows”中的“Windows”。</p>
<p>x|y<br>匹配x或y。例如，“z|food”能匹配“z”或“food”。“(z|f)ood”则匹配“zood”或“food”。</p>
<p>[xyz]<br>字符集合。匹配所包含的任意一个字符。例如，“[abc]”可以匹配“plain”中的“a”。</p>
<p>[^xyz]<br>负值字符集合。匹配未包含的任意字符。例如，“[^abc]”可以匹配“plain”中的“plin”。</p>
<p>[a-z]<br>字符范围。匹配指定范围内的任意字符。例如，“[a-z]”可以匹配“a”到“z”范围内的任意小写字母字符。<br>注意:只有连字符在字符组内部时,并且出现在两个字符之间时,才能表示字符的范围; 如果出字符组的开头,则只能表示连字符本身.</p>
<p>[^a-z]<br>负值字符范围。匹配任何不在指定范围内的任意字符。例如，“[^a-z]”可以匹配任何不在“a”到“z”范围内的任意字符。</p>
<p>\b<br>匹配一个单词边界，也就是指单词和空格间的位置。例如，“er\b”可以匹配“never”中的“er”，但不能匹配“verb”中的“er”。</p>
<p>\B<br>匹配非单词边界。“er\B”能匹配“verb”中的“er”，但不能匹配“never”中的“er”。</p>
<p>\cx<br>匹配由x指明的控制字符。例如，\cM匹配一个Control-M或回车符。x的值必须为A-Z或a-z之一。否则，将c视为一个原义的“c”字符。</p>
<p>\d<br>匹配一个数字字符。等价于[0-9]。</p>
<p>\D<br>匹配一个非数字字符。等价于[^0-9]。</p>
<p>\f<br>匹配一个换页符。等价于\x0c和\cL。</p>
<p>\n<br>匹配一个换行符。等价于\x0a和\cJ。</p>
<p>\r<br>匹配一个回车符。等价于\x0d和\cM。</p>
<p>\s<br>匹配任何空白字符，包括空格、制表符、换页符等等。等价于[ \f\n\r\t\v]。</p>
<p>\S<br>匹配任何非空白字符。等价于[^ \f\n\r\t\v]。</p>
<p>\t<br>匹配一个制表符。等价于\x09和\cI。</p>
<p>\v<br>匹配一个垂直制表符。等价于\x0b和\cK。</p>
<p>\w<br>匹配包括下划线的任何单词字符。等价于“[A-Za-z0-9_]”。</p>
<p>\W<br>匹配任何非单词字符。等价于“[^A-Za-z0-9_]”。</p>
<p>\xn<br>匹配n，其中n为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，“\x41”匹配“A”。“\x041”则等价于“\x04&amp;1”。正则表达式中可以使用ASCII编码。</p>
<p>\num<br>匹配num，其中num是一个正整数。对所获取的匹配的引用。例如，“(.)\1”匹配两个连续的相同字符。</p>
<p>\n<br>标识一个八进制转义值或一个向后引用。如果\n之前至少n个获取的子表达式，则n为向后引用。否则，如果n为八进制数字（0-7），则n为一个八进制转义值。</p>
<p>\nm<br>标识一个八进制转义值或一个向后引用。如果\nm之前至少有nm个获得子表达式，则nm为向后引用。如果\nm之前至少有n个获取，则n为一个后跟文字m的向后引用。如果前面的条件都不满足，若n和m均为八进制数字（0-7），则\nm将匹配八进制转义值nm。</p>
<p>\nml<br>如果n为八进制数字（0-7），且m和l均为八进制数字（0-7），则匹配八进制转义值nml。</p>
<p>\un<br>匹配n，其中n是一个用四个十六进制数字表示的Unicode字符。例如，\u00A9匹配版权符号（&copy;）。</p>
<p>\&lt; >    匹配词（word）的开始（\&lt;）和结束（>）。例如正则表达式\<the\>能够匹配字符串”for the wise”中的”the”，但是不能匹配字符串”otherwise”中的”the”。注意：这个元字符不是所有的软件都支持的。</the\></p>
<p>( )    将 ( 和 ) 之间的表达式定义为“组”（group），并且将匹配这个表达式的字符保存到一个临时区域（一个正则表达式中最多可以保存9个），它们可以用 \1 到\9 的符号来引用。</p>
<p>|    将两个匹配条件进行逻辑“或”（Or）运算。例如正则表达式(him|her) 匹配”it belongs to him”和”it belongs to her”，但是不能匹配”it belongs to them.”。注意：这个元字符不是所有的软件都支持的。</p>
<ul>
<li>匹配1或多个正好在它之前的那个字符。例如正则表达式9+匹配9、99、999等。注意：这个元字符不是所有的软件都支持的。</li>
</ul>
<p>?    匹配0或1个正好在它之前的那个字符。注意：这个元字符不是所有的软件都支持的。</p>
<p>{i} {i,j}    匹配指定数目的字符，这些字符是在它之前的表达式定义的。例如正则表达式A[0-9]{3} 能够匹配字符”A”后面跟着正好3个数字字符的串，例如A123、A348等，但是不匹配A1234。而正则表达式[0-9]{4,6} 匹配连续的任意4个、5个或者6个数字</p>
<p>自行总结：<br>\     转义<br>^     字符串开头<br>$     字符串结尾</p>
<ul>
<li>匹配0次以上</li>
</ul>
<ul>
<li>匹配1次以上<br>?     匹配前面的子表达式0或1次<br>（例）  do(es)?匹配do或does</li>
</ul>
<p>{n}     匹配前面的子表达式n次<br>{n,}     匹配前面的子表达式至少n次<br>{n,m}     匹配前面的子表达式n至m次均可<br>？     紧跟在任何其它限制符（* + ? {n} {n,} {n,m}）后面时，匹配模式为非贪婪，即尽可能少地去匹配。<br>.     匹配”\r\n”外任何单个字符</p>
<p>(pattern)     匹配pattern并获取这一匹配。<br>(?:pattern)     匹配patten但不获取匹配结果。即非匹配获取。<br>(?=pattern)     正向肯定预查，在匹配pattern的字符串开始出匹配查找字符串。非匹配获取。<br>Windows(?=95|98|NT|2000)匹配Windows2000</p>
<p>(?!pattern)     正向否定预查。在匹配pattern的字符串开始出匹配查找字符串。非匹配获取。<br>Windows(?!95|98|NT|2000)匹配Windows3.1</p>
<p>(?&lt;=pattern)     反向肯定预查。在匹配pattern的字符串开始出匹配查找字符串。非匹配获取。<br>(?&lt;=95|98|NT|2000)Windows匹配2000Windows</p>
<p>(?&lt;!pattern)     反向否定预查。在匹配pattern的字符串开始出匹配查找字符串。非匹配获取。<br>(?&lt;!95|98|NT|2000)Windows匹配3.1Windows</p>
<p>x|y     匹配x或y中的任一<br>[xyz]     匹配x或y或z中的任一。[abc]匹配plain中的a<br>[^xyz]     匹配集合x、y、z外的任意字符。[^abc]匹配plain中的plin<br>[a-z]     匹配a到z中的任一<br>[^a-z]     匹配任何不在a到z范围内的任意字符<br>\b     匹配一个单词边界。er\b匹配never中的er，但不能匹配verb中的er。<br>\B     匹配一个非单词边界。与上一个例相反<br>\cx     匹配由x知名的控制字符。如，\cm匹配一个controlM或回车键。x的值唏嘘为A-Z或a-z之一。</p>
<p>\d     匹配一个数字字符<br>\D     匹配一个非数字字符<br>\f     匹配一个换页符，等价于\x0c和\cL<br>\n     匹配一个换行符，等价于\x0a和\cJ<br>\r     匹配一个回车符，等价于\x0d和\cM<br>\s     匹配任何空白字符，等价于[\f\n\r\t\v]<br>\S     匹配任何非空白字符<br>\t     匹配一个制表符,等价于\x09和\cl<br>\v     匹配一个垂直制表符,等价于\x0b和\cK<br>\w     匹配包括下划线的任何单词字符<br>\W     匹配任何非单词字符</p>
<p>\xn     匹配n，n为十六进制转义值，十六进制转义值必须为确定的两个数字长<br>\num     匹配num，num为正整数<br>\n     标识一个八进制转义值或一个向后引用<br>\nm     类同上<br>\nml     类同上</p>
<p>\un     匹配n，n为4个十六进制数字表示的Unicode字符<br>\&lt;>     匹配词（word）的开始（\&lt;）和技术（>）。详情另查<br>()     将(和)之间的表达式定义为“组”（group），并且将匹配这个表达式的字符报错到一个临时区，一个正则表达式最多可以保存9个组，它们可以用\1到\9的符号来引用<br>{i}{i,j}     匹配指定数目的字符</p>
<h1 id="PHP-Reg-Expr-正则表达式书写"><a href="#PHP-Reg-Expr-正则表达式书写" class="headerlink" title="PHP Reg Expr 正则表达式书写"></a>PHP Reg Expr 正则表达式书写</h1><p>某一次使用preg_replace函数：<br>$c = preg_replace(‘<title>.*?</title>‘, “<title>t_title!</title>“, $c)</p>
<p>出现Unknown Modifier错误解决方法，一直无法匹配成功：<br>PHP Warning:  preg_replace(): Unknown modifier ‘.’ in C:\Users\IceHe\script\t.php on line 63</p>
<p>原来！——<br>在PHP的正则模式中，用 / 做定界符，<br>但正则中也含有 / ，因此会出现此错误，<br>PHP误当后面的一个中的斜杠是结束的定界符。</p>
<ol>
<li><p>加上缺漏的定界符 / ，再给原有的 / 加转义符 \ ，解决：<br>$c = preg_replace(‘/<title>.*?&lt;\/title&gt;/‘, “<title>t_title!</title>“, $c)</title></p>
</li>
<li><p>另一个解决方法，改用其它定界符：<br>echo preg_replace(‘{<span class="h">[^&lt;]*?</span>}’,’’,$a);</p>
</li>
</ol>
<h1 id="Reg-Exper-Replace"><a href="#Reg-Exper-Replace" class="headerlink" title="Reg Exper Replace"></a>Reg Exper Replace</h1><p>当前文件内容替换<br>路径下指定类型文件内容替换</p>
<p>匹配用的正则表达式在第一行<br>替换用的正则表达式在第二行</p>
<p>([\d\d\/\d\d\/\d\d) [^]]*?(])<br>\1\2</p>
<p>(title: \d\d\/\d\d\/\d\d) .*?\n<br>\1\n</p>
<p>([\d\d\/\d\d\/\d\d (?:[a-z]+[\d]+ )<em>(?:[a-z]+[\d]+)+) [^a-z][^]\n]</em>?(])<br>\1\2</p>
<p>去除<a ...=""> </a>标签<br><a [^="">]<em>&gt;([\s\S]</em>)</a><br>\1</p>

    
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_switch" class="center">
        <a href="javascript:loadDisqus();">
          显示评论，需翻墙<br/>Show Comments
        </a>
      </div>
      <script type="text/javascript">
        function loadDisqus() {
          $('#disqus_switch').hide();
          $('#disqus_thread').show();
          run_disqus_script('count.js');
          run_disqus_script('embed.js');
        }
      </script>
      <div id="disqus_thread" style="display:none;">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <a href="/about/">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://7vzp68.com1.z0.glb.clouddn.com/about/avatar_pretty_00.png"
               alt="Ice He" />

          <!--
          <p class="site-author-name" itemprop="name">Ice He</p>
          -->
          
              <p class="site-description motion-element white" itemprop="description">Less.</p>
          
        </div>
        </a>

        <div class="hidden post-toc" style="max-height: 1220px; width: calc(100% + 0px);" id="popular-post-div">
          <div class="post-toc-content">
            <ol class="nav" id="popular-list"></ol>
          </div>
        </div>

        <!--
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/">
                <span class="site-state-item-count">55</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          
        </nav>
        -->

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i> RSS 订阅
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <!--
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  - <span class="author" itemprop="copyrightHolder">Ice He</span>. &nbsp;All rights reserved.
  -->
  <span class="author" itemprop="copyrightHolder">IceHe</span>
</div>



        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  

    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://icehe.me/notes/regular_expression.html';
          this.page.identifier = 'notes/regular_expression.html';
          this.page.title = '正则表达式 - Note';
        };

        // IceHe.me 追加的函数
        function run_disqus_script(disqus_script) {
          var d = document, s = d.createElement('script');
          s.src = 'https://https-icehe-me.disqus.com/' + disqus_script;
          s.setAttribute('data-timestamp', '' + +new Date());
          if (disqus_script == 'count.js') {
            s.id = 'dsq-count-scr';
          }
          (d.head || d.body).appendChild(s);
        }

        /*
        var d = document, s = d.createElement('script');
        s.src = 'https://https-icehe-me.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
        */
      </script>
    

  




	





  





  








  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("u1mg4ase5iwhhnyqlavbmd5lkbj7mb5oy4linckob65z1axp", "fe7peybzqmpgludkwu43fk15s655i8neejt3pkoezlqtbeu5");</script>
  <script>
    function timeDesc(time) {
      time /= 100;
      return time >= 10 ? Math.floor(time) / 10 + ' k +'
        : (time >= 1 ? Math.floor(time) + '00 +' : '99 -');
    }

    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            if (time >= 200) {
              var element = document.getElementById(url);

              $(element).find(COUNT_CONTAINER_REF).text(timeDesc(time));
              $(element).removeClass('hidden');
            }
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            if ((-1 != location.href.indexOf("icehe.me")) // 在 icehe.me 的域名下
              && (-1 == location.href.indexOf("icehe.me/notes/")) // 不在 icehe.me/notes 的域名下
            ) {
              counter.increment("time");
              counter.save(null, {
                success: function(counter) {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(timeDesc(counter.get('time')));
                },
                error: function(counter, error) {
                  console.log('Failed to save Visitor num, with error message: ' + error.message);
                }
              });
            }
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(timeDesc(newcounter.get('time')));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    function ranking(Counter, is_post) {
        var popular_list = $('#popular-list2');
        var is_post = (popular_list.length == 1);
        var count = is_post ? 20 : 10;
        if (!is_post) {
            popular_list = $('#popular-list');
            if (popular_list.length == 0) {
                return;
            }
            $('#popular-post-div').removeClass('hidden');
        }

        var query = new AV.Query(Counter);
        query.descending('time');
        query.limit(count + 10);

        //var regex = new RegExp('^.*?(?<!linux).*$', 'i');
        //query.matches('url', regex);

        var excluding_list = [
            '/about/',
            '/bookmarks/',
            '/reward/',
            '/search/', /* Hidden */
            '/index/', /* Removed */
            '/resume/', /* Removed */
            '/linux/[06] Linux 通过 pip 安装使用 Shadowsocks - CentOS 7/',
            '/linux/[05] 自动挂载 NTFS 格式的 硬盘分区 - CentOS 7/',
            '/linux/[04] 安装 CentOS 7 后必做的 安全防范措施/',
            '/linux/[03] Update Kernel 升级内核 - CentOS 7/',
            '/linux/[02] Config System Envir 配置系统环境 - CentOS 7/',
            '/linux/[01] 恢复 Windows 的 开机引导 - CentOS 7/',
            '/linux/[00] U盘安装 CentOS 7/'
        ];
        query.notContainedIn('url', excluding_list);

        query.limit(count);
        query.find()
            .done(function (results) {
                if (results.length === 0) {
                    return;
                }

                    popular_list.append(
                        '<li class="nav-item nav-level-1 bold" style="'
                        + 'border-bottom-width: 1px; '
                        + 'border-bottom-style: solid; '
                        + 'border-bottom-color: #ccc;"> '
                        + '<a class="nav-link" href="/bookmarks">'
                        + '<span class="nav-textwhite">'
                        + '<i class="fa fa-fire"></i> &nbsp;'
                        + ' 热榜 '
                        + '</span></a></li>'
                    );
                for (var i = 0; i < results.length; ++i) {
                    var counter = results[i];
                    var title = counter.get("title");
                    var time = timeDesc(counter.get('time'));

                    popular_list.append(
                        '<li class="nav-item nav-level-1" '
                        + ((i + 1) % 10 == 0
                            ? 'style="border-bottom-width: 1px; '
                                + 'border-bottom-style: solid;'
                                + 'border-bottom-color: #ccc;"'
                            : '')
                        + '> '
                        + '<span class="nav-number"> '
                        + ((i + 1) % 10) + '. &nbsp;'
                        + '</span> '
                        + '<a class="nav-link" href="' + counter.get("url") + '"> '
                        + '<span class="nav-text"> ' + counter.get('title') + ' </span> '
                        + '</a> '
                        + '<span class="nav-number"> '
                        + '<sup> &nbsp;' + time + ' </sup> '
                        + '</span> '
                        + '</li>'
                    );
                }
                if (!is_post) {
                    popular_list.append(
                        '<li class="nav-item nav-level-1 bold"> '
                        + '<a class="nav-link" href="/bookmarks">'
                        + '<span class="nav-text">'
                        + '<i class="fa fa-bookmark"></i> &nbsp;'
                        + ' 导航'
                        + '</span></a>'
                        + '</li>'
                    );
                }
          })
          .fail(function (object, error) {
              console.log("Error: " + error.code + " " + error.message);
          });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('#is_index').length == 1) {
        showTime(Counter);
      } else {
        addCount(Counter);
      }
      ranking(Counter);
    });
  </script>



  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.0"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.0"></script>


  

</body>
</html>
