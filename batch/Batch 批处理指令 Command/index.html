<!doctype html><html class="theme-next mist" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="google34949e442e488102"><meta name="baidu-site-verification" content="04tLeUMqMf"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="https://fonts.css.network/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css"><meta name="keywords" content="Batch,"><link rel="alternate" href="/atom.xml" title="IceHe" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/images/alphabet_letter_h.ico?v=5.1.1"><meta name="description" content="Batch Commands&amp;#58; echo, pause, nul, goto, call, choice, start, setlocal, endlocal, setx, pushd, popd, for /d /r /l /f, if, set。"><meta name="keywords" content="Batch"><meta property="og:type" content="article"><meta property="og:title" content="Batch 批处理指令"><meta property="og:url" content="http://icehe.me/batch/Batch 批处理指令 Command/index.html"><meta property="og:site_name" content="IceHe"><meta property="og:description" content="Batch Commands&amp;#58; echo, pause, nul, goto, call, choice, start, setlocal, endlocal, setx, pushd, popd, for /d /r /l /f, if, set。"><meta property="og:updated_time" content="2017-07-01T14:55:16.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Batch 批处理指令"><meta name="twitter:description" content="Batch Commands&amp;#58; echo, pause, nul, goto, call, choice, start, setlocal, endlocal, setx, pushd, popd, for /d /r /l /f, if, set。"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",sidebar:{display:"always",offset:12,offset_float:0,b2t:!1,scrollpercent:!0},fancybox:!0,motion:!1,duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://icehe.me/batch/Batch 批处理指令 Command/"><title>Batch 批处理指令 | IceHe</title><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?ba81ef13fc65c4dcf8cf8586d25818a4";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">IceHe</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">More is in vain when less will serve.</h1></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-quote-left"></i><br>文章</a></li><li class="menu-item menu-item-nav"><a href="/bookmarks" rel="section"><i class="menu-item-icon fa fa-fw fa-bookmark"></i><br>导航</a></li><li class="menu-item menu-item-cv"><a href="/about" rel="section"><i class="menu-item-icon fa fa-fw fa-star"></i><br>简历</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav><style type="text/css">.bold{font-weight:700}.center{text-align:center}.hidden{display:none}.no_underline{border-bottom:0}.white{color:#fff}.pace .pace-progress{background:#000}</style></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://icehe.me/batch/Batch 批处理指令 Command/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="IceHe"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar_pretty_00.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="IceHe"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">Batch 批处理指令</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-plus-o"></i> </span><time title="更新于" itemprop="dateCreated datePublished" datetime="2015-03-04T00:00:00+08:00">2015-03-04</time></span><div class="post-wordcount"><span class="post-meta-divider"></span> <span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span title="字数统计">1,666 </span>字</div><span class="post-category"><span class="post-meta-divider"></span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Batch/" itemprop="url" rel="index"><span itemprop="name">Batch</span></a> </span></span><span id="/batch/Batch 批处理指令 Command/" class="hidden leancloud_visitors" data-flag-title="Batch 批处理指令"><span class="post-meta-divider"></span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="leancloud-visitors-count" title="阅读次数"></span></span><div class="post-description">Batch Commands&#58; echo, pause, nul, goto, call, choice, start, setlocal, endlocal, setx, pushd, popd, for /d /r /l /f, if, set。</div></div></header><div class="post-body" itemprop="articleBody"><div style="word-wrap:break-word;-webkit-nbsp-mode:space;-webkit-line-break:after-white-space"><b>Better Ref</b>: 《<a href="https://wsgzao.github.io/post/windows-batch/" target="_blank" rel="external">Windows批处理(cmd/bat)常用命令小结</a>》<sup>todo</sup><br><br><div><strong>bat资料from：</strong></div><div>网页<strong><a href="http://andylin02.iteye.com/blog/420598" target="_blank" rel="external">简明bat教程</a></strong></div><div>本地<a href="evernote:///view/7264256/s33/0c948d72-4b32-4638-a112-ed24499339ab/0c948d72-4b32-4638-a112-ed24499339ab/" style="color:#69aa35" target="_blank" rel="external">.bat批处理命令简明教程</a></div><div><br></div><div>简便句式</div><div>cmd0 <b>&amp;&amp;</b> cmd_suc <b>&#166;&#166;</b> cmd_failed</div><div>cmd0指令成功，则执行cmd_suc，否则执行cmd_failed。</div><div>（例）</div><div>call php x.php &amp;&amp; echo suc. &#166;&#166; echo failed!</div><div><br></div><div><br></div><div><strong>rem &nbsp; &nbsp;</strong> 注释。（算是一条指令）可以作为空指令使用~</div><div><strong>::</strong>&nbsp; &nbsp; &nbsp;注释。（纯粹的注释）</div><div><br></div><div><strong>&#64; &nbsp; &nbsp;</strong> 不显示当前行的指令</div><div><br></div><div><strong>echo on/off</strong> &nbsp; &nbsp; 回显开关</div><div><br></div><div><b>echo. &nbsp; &nbsp;</b> 显示空行（注意：指令最后带一个英文句号！）</div><div><br></div><div><strong>pause &nbsp; &nbsp;</strong> 暂停执行，会显示 “按任意键退出”</div><div>pause<b>&gt;nul &nbsp; &nbsp;</b> 将<b>显示的内容重定向到nul</b>，即不显示“按任意键退出”</div><div><b><br></b></div><div><b>nul</b>&nbsp;的官方解释是 &quot;<b>空设备</b>&quot;</div><div><b>&lt;nul &nbsp; &nbsp; 回车但不换行</b></div><div><b>&gt;nul</b> &nbsp; &nbsp; 是<b>屏蔽命令的输出</b>内容</div><div><br></div><div><strong>goto</strong> tag &nbsp; &nbsp; 跳转到标签位</div><div>:tag &nbsp; &nbsp; 冒号后面跟着标签号</div><div><br></div><div><strong>call</strong> bat_file_path &nbsp; &nbsp; 调用另一个批处理文件</div><div><br></div><div><strong>start &nbsp; &nbsp;</strong> 调用外部程序</div><div><br></div><div><strong>choice</strong> /c ync /d default_choice /l limit_time &nbsp; &nbsp; 提示用户输入字符，再据此决定下一步操作。</div><div><br></div><div><strong>&#37;n &nbsp;</strong> &nbsp; 调用.bat时的第n个参数，n为1~9（只能有9个）</div><div><strong>shift &nbsp; &nbsp;</strong> 偏移位置去获取其它参数在批处理文件中</div><div><br></div><div><strong>pushd &nbsp; &nbsp; 保存当前路径</strong></div><div><strong>popd &nbsp; &nbsp; 恢复上一个路径</strong></div><div><strong>mklink &nbsp; &nbsp; 添加符号连接或硬连接</strong></div><div><strong>path &nbsp; &nbsp; 显示或(暂时)改变(局部的)环境变量</strong><strong>path</strong></div><div><b>setx &nbsp; &nbsp; (长期)设置环境变量</b></div><div><br></div><div><strong>setlocal &nbsp; &nbsp; 在批处理文件中，开始将运行环境局部化</strong></div><div><strong>endlocal &nbsp; &nbsp; 在批处理文件中结束对本地环境特征的修改</strong></div><div><br></div><div><b>exit &nbsp; &nbsp; 退出</b></div><div><b>exit&nbsp;</b><b>&#37;exitCode&#37; &nbsp; &nbsp; 退出cmd.exe时，设置exitCode</b></div><div><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;为</b><b>&#37;exitCode&#37;</b></div><div><b>exit /b &#37;ret&#37; &nbsp; &nbsp; 退出并设置.bat文件的errorlevel</b></div><div><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;（错误返回码）为&#37;ret&#37;</b></div><div><br></div><div><b>&gt; &nbsp; &nbsp; FOR语句</b></div><div><b><br></b></div><div><strong>for /d /r /l&nbsp;</strong><strong>/f</strong><strong>&nbsp; &nbsp; 即dir/recursive/file 等</strong></div><div><strong><br></strong></div><div>FOR {&#37;variable&#166;&#37;&#37;variable} in (set) do command [CommandLineOptions]</div><div>&#37;variable 指定一个单一字母可替换的参数。<br>(set) 指定一个或一组文件。可以使用通配符。<br>command 指定对每个文件执行的命令。<br></div><div><br></div><div>FOR /R [[drive:]path] &#37;variable IN (set) DO command [CommandLineOptions]</div><div>检查以 [drive:]path 为根的目录树，指向每个目录中的FOR 语句。</div><div>如果在 /R 后没有指定目录，则使用当前目录。</div><div>如果集仅为一个单点(.)字符，则枚举该目录树。<br></div><div><br></div><div>FOR /L &#37;variable IN (start,step,end) DO command [command-param]</div><div><br></div><div>FOR /F [&quot;options&quot;] &#37;variable IN <strong>(file-set)</strong> DO command</div><div>&nbsp; &nbsp; &nbsp;//注意：圆括号内的参数 <b>没</b>带<b>引号</b>！</div><div>FOR /F [&quot;options&quot;] &#37;variable IN <strong>(&quot;string&quot;)</strong> DO command</div><div>&nbsp;&nbsp; &nbsp; //注意：圆括号内的参数 带<b>双引号</b>！</div><div>FOR /F [&quot;options&quot;] &#37;variable IN <strong>(&apos;command&apos;)</strong> DO command</div><div>&nbsp;&nbsp; &nbsp; //注意：圆括号内的参数 带<b>单</b>引号！</div><div><br></div><div><strong>options中的设置：</strong></div><div>eol=c - 指一个行注释字符的结尾(就一个)</div><div>&nbsp; &nbsp; &nbsp;如eol=; &nbsp; &nbsp; 即每个以分号开头的行将被忽略</div><div>skip=n - 指在文件开始时忽略的行数。</div><div>delims=xxx - 指分隔符集。这个替换了空格和跳格键的</div><div>默认分隔符集。</div><div>tokens=x,y,m-n,k* - 指每行的哪一个符号被传递到每个迭代</div><div>&nbsp; &nbsp; &nbsp;如for /f &quot;tokens=1,3 &#37;&#37;i …… &nbsp; &nbsp; 获取每行的第1、第3个</div><div>&nbsp; &nbsp; &nbsp;如for /f &quot;tokens=2-4 &#37;&#37;i …… &nbsp; &nbsp; 获取每行的第2至第4个</div><div>&nbsp; &nbsp; &nbsp;如for /f &quot;tokens=2* &#37;&#37;i …… &nbsp; &nbsp; 第二个赋值给&#37;&#37;i，剩下的都赋值给&#37;&#37;j</div><div>usebackq - 未查</div><div><br></div><div><strong>&#37;&#37;i变量的加强拓展：</strong></div><div><b>&#37;cname:~0,1&#37; &nbsp; &nbsp; 获取cname中的第0字符，到第1个字符结束</b></div><div>~I - 删除任何引号(&quot;)，扩充 &#37;I</div><div>&#37;~fI - 将 &#37;I 扩充到一个完全合格的路径名</div><div>&#37;~dI - 仅将 &#37;I 扩充到一个驱动器号</div><div>&#37;~pI - 仅将 &#37;I 扩充到一个路径</div><div>&#37;~nI - 仅将 &#37;I 扩充到一个文件名</div><div>&#37;~xI - 仅将 &#37;I 扩充到一个文件扩展名</div><div>&#37;~sI - 扩充的路径只含有短名</div><div>&#37;~aI - 将 &#37;I 扩充到文件的文件属性</div><div>&#37;~tI - 将 &#37;I 扩充到文件的最讨厌这话期/时间</div><div>&#37;~zI - 将 &#37;I 扩充到文件的大小</div><div>&#37;~$PATH:I - 查找列在路径环境变量的目录，并将 &#37;I 扩充</div><div>到找到的第一个完全合格的名称。如果环境变量</div><div>未被定义，或者没有找到文件，此组合键会扩充</div><div>空字符串</div><div><br></div><div><strong>可以组合修饰符</strong>来得到多重结果:</div><div>&#37;~dpI - 仅将 &#37;I 扩充到一个驱动器号和路径</div><div>&#37;~nxI - 仅将 &#37;I 扩充到一个文件名和扩展名</div><div>&#37;~fsI - 仅将 &#37;I 扩充到一个带有短名的完整路径名</div><div>&#37;~dp$PATH:i - 查找列在路径环境变量的目录，并将 &#37;I 扩充</div><div>到找到的第一个驱动器号和路径。</div><div>&#37;~ftzaI - 将 &#37;I 扩充到类似输出线路的 DIR</div><div><br></div><div><b>（例）文件夹遍历</b></div><div>setlocal enabledelayedexpansion<br>FOR /R d: &#37;&#37;i IN (.) DO (<br>&nbsp; &nbsp; &nbsp;set dd=&#37;&#37;i<br>&nbsp; &nbsp; &nbsp;set &quot;dd=!dd:~0,-1!&quot;<br>&nbsp; &nbsp; &nbsp;echo !dd!<br>)<br></div><div>其中，感叹号其实就是变量百分号(&#37;)的强化版。之所以要用!而不用&#37;，是因为在for循环中，当一个变量被多次赋值时，&#37;dd&#37;所获取的仅仅是dd第一次被赋予的值；要想刷新dd的值，就必须首先通过命令&quot;setlocal enabledelayedexpansion&quot;来开启延迟变量开关，然后用!dd!来获取dd的值。</div><div><br></div><div><br></div><div><b>&gt; &nbsp; &nbsp; IF 语句</b></div><div>简便用的句式：if &#37;var == val cmd1 &amp;&amp; cmd2</div><div>条件语句，true则执行cmd1，否则执行 cmd2。</div><div><b><br></b></div><div><b>1.比较字符串</b></div><div>set /p PW=Please input password:<br>if <b>&#37;PW&#37;==str</b>&nbsp;(<br>&nbsp;&nbsp;&nbsp;&nbsp; echo YES!<br>) ELSE (<br>&nbsp;&nbsp;&nbsp;&nbsp; echo NO!<br>)</div><div><br></div><div><b>2.比较数字</b></div><div>if not <b>&#37;num1&#37; LSS &#37;num2&#37;</b> (</div><div>&nbsp; &nbsp; &nbsp;...</div><div>) else if ...(</div><div>&nbsp; &nbsp; &nbsp;...</div><div>) else(</div><div>&nbsp; &nbsp; &nbsp;...</div><div>)</div><div><b><br></b></div><div><b>比较运算符：</b><br>EQU - 等于<br>NEQ - 不等于<br>LSS - 小于<br>LEQ - 小于或等于<br>GTR - 大于<br>GEQ - 大于或等于</div><div><br></div><div><b>3.检测变量是否被定义</b></div><div>set var=xxxxx<br>if <b>defined var</b>( ... )</div><div><br></div><div><b>4.判断返回值（ERRORLEVEL）</b></div><div>if <b>errorlevel n</b>&nbsp;( ... )</div><div><br></div><div>多组if errorlevel语句，要根据返回码n从大到小排，</div><div>其原因类似于try...catch语句中的catch规则，具体自行详查。</div><div><br></div><div>批处理中的返回值一般表示了上个命令的执行结果(成功/失败/等)</div><div>每个命令执行完毕后返回值，都会做相应的更改。</div><div>一般返回值为0表示成功,1表示失败。</div><div><br></div><div>一些第三方的返回值比较特殊，</div><div>如Choice、Tmos.exe、Cmos.exe，自行详查。</div><div><br></div><div><br></div><div>if errorlevel n &nbsp; &nbsp; 条件功能：是否为返回码n。</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;多组if errorlevel语句，根据返回码n从大到小排。</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;因为其执行类似于switch。</div><div>if exist file_path &nbsp; &nbsp; 是否存在某文件</div><div><br></div><div><br></div><div><b>&gt; &nbsp; &nbsp; SET 语句</b></div><div><b><br></b></div><div><strong>set &nbsp; &nbsp; 显示、设置、去掉windows的环境变量</strong></div><div><br></div><div>1.给变量<b>赋值</b> &nbsp; &nbsp; set str=something</div><div>2.<b>等待</b>用户<b>输入</b>数据 &nbsp; &nbsp; set /p name=请输入你的名字：</div><div>3.<b>计算</b> &nbsp; &nbsp; set /a num=(6*2)^2</div><div><br></div><div><b>算式中的计算符：</b></div><div>() &nbsp; &nbsp; 分组</div><div>! ~ - &nbsp; &nbsp; &nbsp; &nbsp; 一元运算符</div><div>* / &#37; &nbsp; &nbsp; &nbsp; 算数运算符</div><div>+ - &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 算数运算符</div><div>&lt;&lt; &gt;&gt; &nbsp; &nbsp; 逻辑移位</div><div>&amp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 按位“与”</div><div>^ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 按位“异”</div><div>&#166; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;按位“或”</div><div>= *= /= &#37;= += -= &nbsp; &nbsp; &nbsp; 赋值</div><div>&amp;= ^= &#166;= &lt;&lt;= &gt;&gt;= &nbsp; &nbsp; 移位</div><div>, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 表达式分隔符：</div><div>&nbsp; &nbsp; &nbsp;set /a支持多行表达式并列，比如set /a num1=1+1,num2+1+2,num3=1+3</div><div>&nbsp; &nbsp; &nbsp;并且set /a不需要扩展变量，比如set /a num=&#37;num2&#37;+&#37;num3&#37;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 与set /a num=num2+num3等价</div></div></div><div></div><div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong> IceHe</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="http://icehe.me/batch/Batch 批处理指令 Command/" title="Batch 批处理指令">http://icehe.me/batch/Batch 批处理指令 Command/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Batch/" rel="tag"># Batch</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/batch/DOS 特殊符号 Symbol/" rel="next" title="Batch 批处理中的特殊符号"><i class="fa fa-chevron-left"></i> Batch 批处理中的特殊符号</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/asm/在win7 64位系统上使用debug.exe/" rel="prev" title="在 Windows7 64 位系统上使用 debug.exe">在 Windows7 64 位系统上使用 debug.exe <i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="disqus_switch" class="center"><a href="javascript:loadDisqus();">显示评论，需翻墙<br>Show Comments</a></div><script type="text/javascript">function loadDisqus(){$("#disqus_switch").hide(),$("#disqus_thread").show(),run_disqus_script("count.js"),run_disqus_script("embed.js")}</script><div id="disqus_thread" style="display:none"><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview sidebar-panel sidebar-panel-active"><a href="/about/"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar_pretty_00.png" alt="IceHe"><p class="site-description motion-element white" itemprop="description"></p></div></a><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> &nbsp;订阅 IceHe</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/IceHe" target="_blank" title="GitHub">GitHub </a></span><span class="links-of-author-item"><a href="http://weibo.com/icedes" target="_blank" title="微博">微博 </a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/icehe" target="_blank" title="知乎">知乎 </a></span><span class="links-of-author-item"><a href="https://www.douban.com/people/IceHeGZ" target="_blank" title="豆瓣">豆瓣</a></span></div><div class="post-toc" style="max-height:1220px;width:calc(100% + 0px)" id="popular-post-div"><div class="post-toc-content"><ol class="nav hidden" id="popular-list"></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2015-<span itemprop="copyrightYear">2017</span> &nbsp;<span class="author" itemprop="copyrightHolder">IceHe</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script><script type="text/javascript">function run_disqus_script(t){var e=document,i=e.createElement("script");i.src="https://https-icehe-me.disqus.com/"+t,i.setAttribute("data-timestamp",""+ +new Date),"count.js"==t&&(i.id="dsq-count-scr"),(e.head||e.body).appendChild(i)}var disqus_config=function(){this.page.url="http://icehe.me/batch/Batch 批处理指令 Command/",this.page.identifier="batch/Batch 批处理指令 Command/",this.page.title="Batch 批处理指令"}</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){var r=!1,s=0,a=0,i=n.title.trim(),c=i.toLowerCase(),l=n.content.trim().replace(/<[^>]+>/g,""),h=l.toLowerCase(),p=decodeURIComponent(n.url),u=[],f=[];if(""!=i&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}u=u.concat(e(t,c,!1)),f=f.concat(e(t,h,!1))}),(u.length>0||f.length>0)&&(r=!0,s=u.length+f.length)),r){[u,f].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});function d(e,o,n,r){for(var s=r[r.length-1],i=s.position,c=s.word,l=[],h=0;i+c.length<=n&&0!=r.length;){c===t&&h++,l.push({position:i,length:c.length});var p=i+c.length;for(r.pop();0!=r.length&&(s=r[r.length-1],i=s.position,c=s.word,p>i);)r.pop()}return a+=h,{hits:l,start:o,end:n,searchTextCount:h}}var g=[];0!=u.length&&g.push(d(0,0,i.length,u));for(var v=[];0!=f.length;){var $=f[f.length-1],C=$.position,m=$.word,x=C-20,w=C+80;x<0&&(x=0),w<C+m.length&&(w=C+m.length),w>l.length&&(w=l.length),v.push(d(0,x,w,f))}v.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var y=parseInt("1");y>=0&&(v=v.slice(0,y));function T(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var b="";0!=g.length?b+="<li><a href='"+p+"' class='search-result-title'>"+T(i,g[0])+"</a>":b+="<li><a href='"+p+"' class='search-result-title'>"+i+"</a>",v.forEach(function(t){b+="<a href='"+p+'\'><p class="search-result">'+T(l,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:a,hitCount:s,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),!1===isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){27===t.which&&$(".search-popup").is(":visible")&&onPopupClose()})</script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script><script>AV.initialize("u1mg4ase5iwhhnyqlavbmd5lkbj7mb5oy4linckob65z1axp","fe7peybzqmpgludkwu43fk15s655i8neejt3pkoezlqtbeu5")</script><script>function pvDesc(e){return(e/=100)>=10?Math.floor(e)/10+" k +":e>=1?Math.floor(e)+"00 +":"< 99"}function setPvAndFadeIn(e){var n=e.get("url"),t=e.get("time");if(t>=PV_SHOW_LIMIT){var o=document.getElementById(n);$(o).find(COUNT_CONTAINER_REF).text(pvDesc(t)),$(o).fadeIn()}}function showPv(e){var n=[],t=$(".leancloud_visitors");t.each(function(){n.push($(this).attr("id").trim())}),new AV.Query(e).containedIn("url",n).find().done(function(e){if(0!==e.length){for(o=0;o<e.length;o++)setPvAndFadeIn(e[o]);for(var o=0;o<n.length;o++){var s=n[o],i=document.getElementById(s),a=$(i).find(COUNT_CONTAINER_REF);""==a.text()&&a.text(0)}}else t.find(COUNT_CONTAINER_REF).text(0)}).fail(function(e,n){console.log("Error: "+n.code+" "+n.message)})}function addCount(e){var n=$(".leancloud_visitors"),t=n.attr("id").trim(),o=n.attr("data-flag-title").trim();new AV.Query(e).equalTo("url",t).find({success:function(n){if(n.length>0){var s=n[0];s.fetchWhenSave(!0),-1!=location.href.indexOf("icehe.me")&&-1==location.href.indexOf("icehe.me/notes/")&&(s.increment("time"),s.save(null,{success:function(e){},error:function(e,n){console.log("Failed to save Visitor num, with error message: "+n.message)}})),setPvAndFadeIn(s)}else{var i=new e,a=new AV.ACL;a.setPublicReadAccess(!0),a.setPublicWriteAccess(!0),i.setACL(a),i.set("title",o),i.set("url",t),i.set("time",1),i.save(null,{success:function(e){var n=$(document.getElementById(t));n.find(".leancloud-visitors-count").text(pvDesc(e.get("time"))),n.fadeIn()},error:function(e,n){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}function ranking(e,n){var t=$("#popular-list2"),o=1==t.length,s=o?20:10;(o||0!=(t=$("#popular-list")).length)&&new AV.Query(e).descending("time").limit(s+10).notContainedIn("url",["/about/","/bookmarks/","/reward/","/search/","/index/","/resume/","/linux/[06] Linux 通过 pip 安装使用 Shadowsocks - CentOS 7/","/linux/[05] 自动挂载 NTFS 格式的 硬盘分区 - CentOS 7/","/linux/[04] 安装 CentOS 7 后必做的 安全防范措施/","/linux/[03] Update Kernel 升级内核 - CentOS 7/","/linux/[02] Config System Envir 配置系统环境 - CentOS 7/","/linux/[01] 恢复 Windows 的 开机引导 - CentOS 7/","/linux/[00] U盘安装 CentOS 7/"]).limit(s).find().done(function(e){if(0!==e.length){t.append('<li class="nav-item nav-level-1 bold" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #ccc;"> <span class="nav-textwhite"><i class="fa fa-fire"></i> &nbsp; 热榜 </span></li>');for(var n=0;n<e.length;++n){var s=e[n],i=s.get("url"),a=s.get("title"),l=pvDesc(s.get("time"));t.append('<li class="nav-item nav-level-1" '+((n+1)%10==0?'style="border-bottom-width: 1px; border-bottom-style: solid;border-bottom-color: #ccc;"':"")+'> <span class="nav-number"> '+(n+1)%10+'. &nbsp;</span> <a class="nav-link" href="'+i+'"> <span class="nav-text"> '+a+' </span> </a> <span class="nav-number"> <sup> &nbsp;'+l+" </sup> </span> </li>")}o||t.append('<li class="nav-item nav-level-1 bold"> <span class="nav-text"><i class="fa fa-coffee"></i> &nbsp; 欢迎</span></li>'),t.fadeIn()}}).fail(function(e,n){console.log("Error: "+n.code+" "+n.message)})}var PV_SHOW_LIMIT=200,COUNT_CONTAINER_REF=".leancloud-visitors-count";$(function(){var e=AV.Object.extend("Counter");addCount(e),ranking(e)})</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.1"></script></body></html>